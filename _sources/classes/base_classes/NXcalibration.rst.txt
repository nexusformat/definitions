.. auto-generated by dev_tools.docs.nxdl from the NXDL source base_classes/NXcalibration.nxdl.xml -- DO NOT EDIT

.. index::
    ! NXcalibration (base class)
    ! calibration (base class)
    see: calibration (base class); NXcalibration

.. _NXcalibration:

=============
NXcalibration
=============

..
    Contributors List

    .. |contrib_name| replace:: Peter Chang|PeterC-DLS|https://avatars.githubusercontent.com/u/1381719?v=4|2026-02-19

    .. |contrib_name| replace:: Lukas Pielsticker|lukaspie|https://avatars.githubusercontent.com/u/50139597?v=4|2025-02-28

**Status**:

  base class, extends :ref:`NXprocess`

**Description**:

  Subclass of NXprocess to describe post-processing calibrations.

**Symbols**:

  The symbols used in the schema to specify e.g. dimensions of arrays

  **ncal**: Number of points of the calibrated and uncalibrated axes

**Groups cited**:
  :ref:`NXdata`, :ref:`NXnote`, :ref:`NXparameters`

.. index:: NXnote (base class); used in base class, NXparameters (base class); used in base class, NXdata (base class); used in base class

**Structure**:

  .. _/NXcalibration@default-attribute:

  .. index:: default (file attribute)

  **@default**: (optional) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXobject@default-attribute>`

    .. collapse:: Declares which child group contains a path leading ...

        .. index:: plotting

        Declares which child group contains a path leading
        to a :ref:`NXdata` group.

        It is recommended (as of NIAC2014) to use this attribute
        to help define the path to the default dataset to be plotted.
        See https://www.nexusformat.org/2014_How_to_find_default_data.html
        for a summary of the discussion.

  .. _/NXcalibration/description-field:

  .. index:: description (field)

  **description**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

    A description of the procedures employed.

  .. _/NXcalibration/physical_quantity-field:

  .. index:: physical_quantity (field)

  **physical_quantity**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

    .. collapse:: The physical quantity of the calibration, e.g., ...

        The physical quantity of the calibration, e.g.,
        energy, momentum, time, etc.

  .. _/NXcalibration/identifier_calibration_method-field:

  .. index:: identifier_calibration_method (field)

  **identifier_calibration_method**: (optional) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXobject/identifierNAME-field>`

    .. collapse:: A digital persistent identifier (e.g., DOI, ISO standard) referring to a detai ...

        A digital persistent identifier (e.g., DOI, ISO standard) referring to a detailed description of a
        calibration method but no actual calibration data.

  .. _/NXcalibration/identifier_calibration_reference-field:

  .. index:: identifier_calibration_reference (field)

  **identifier_calibration_reference**: (optional) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXobject/identifierNAME-field>`

    .. collapse:: A digital persistent identifier (e.g., a DOI) referring to a publicly availabl ...

        A digital persistent identifier (e.g., a DOI) referring to a publicly available calibration measurement
        used for this instrument, e.g., a measurement of a known standard containing calibration information.
        The axis values may be copied or linked in the appropriate NXcalibration fields for reference.

  .. _/NXcalibration/last_process-field:

  .. index:: last_process (field)

  **last_process**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

    Indicates the name of the last operation applied in the NXprocess sequence.

  .. _/NXcalibration/applied-field:

  .. index:: applied (field)

  **applied**: (optional) :ref:`NX_BOOLEAN <NX_BOOLEAN>` 

    Has the calibration been applied?

  .. _/NXcalibration/original_axis-field:

  .. index:: original_axis (field)

  **original_axis**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` (Rank: 1, Dimensions: [ncal]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

    Array containing the data coordinates in the original uncalibrated axis

    .. _/NXcalibration/original_axis@symbol-attribute:

    .. index:: symbol (field attribute)

    **@symbol**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

      .. collapse:: The symbol of the axis to be used in the fit_function, e.g., `energy`, `E`. ...

          The symbol of the axis to be used in the fit_function, e.g., `energy`, `E`.
          This should comply to the following naming rules (similar to python's naming rules):

          * A variable name must start with a letter or the underscore character
          * A variable name cannot start with a number
          * A variable name can only contain alpha-numeric characters and underscores (A-z, 0-9, and _ )
          * Variable names are case-sensitive (age, Age and AGE are three different variables)

    .. _/NXcalibration/original_axis@input_path-attribute:

    .. index:: input_path (field attribute)

    **@input_path**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

      .. collapse:: The path from which this data is derived, e.g., raw detector axis. ...

          The path from which this data is derived, e.g., raw detector axis.
          Should be a valid NeXus path name, e.g., /entry/instrument/detector/raw.

  .. _/NXcalibration/fit_formula_description-field:

  .. index:: fit_formula_description (field)

  **fit_formula_description**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

    .. collapse:: Here we can store a description of the formula used for the fit function. ...

        Here we can store a description of the formula used for the fit function.

        For polynomial fits, use a0, a1, ..., an for the coefficients, corresponding to the values in the
        coefficients group. Use x0, x1, ..., xm for the mth position in the `original_axis` field.

        If there is the symbol attribute specified for the `original_axis` this may be used instead of x.
        If you want to use the whole axis use `x`.

        Alternate axis can also be available as specified by the `fit_formula_inputs` group.
        The data should then be referred here by the `SYMBOL` name, e.g., for a field
        name ``my_field`` in ``fit_formula_inputs``, it should be referred here by ``my_field`` or ``my_field0``
        if you want to read the zeroth element of the array.

  .. _/NXcalibration/mapping_MAPPING-field:

  .. index:: mapping_MAPPING (field)

  **mapping_**\ :bolditalic:`MAPPING`: (optional) :ref:`NX_FLOAT <NX_FLOAT>` 

    .. collapse:: Mapping data for calibration. ...

        Mapping data for calibration.

        This can be used to map data points from uncalibrated to calibrated values,
        i.e., by multiplying each point in the input axis by the corresponding point in the mapping data.

  .. _/NXcalibration/calibrated_axis-field:

  .. index:: calibrated_axis (field)

  **calibrated_axis**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` (Rank: 1, Dimensions: [ncal]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

    An array representing the axis after calibration, matching the data length

  .. _/NXcalibration/calibration_object-group:

  **calibration_object**: (optional) :ref:`NXnote` :ref:`⤆ </NXprocess/NOTE-group>`

    .. collapse:: A file serialization of a calibration which may not be publicly available (ext ...

        A file serialization of a calibration which may not be publicly available (externally from the NeXus file).

        This metadata can be a documentation of the source (file) or database (entry) from which pieces
        of information have been extracted for consumption (e.g. in a research data management system (RDMS)).
        It is also possible to include the actual file by using the `file` field.

        The axis values may be copied or linked in the appropriate NXcalibration fields for reference.

  .. _/NXcalibration/fit_formula_inputs-group:

  **fit_formula_inputs**: (optional) :ref:`NXparameters` :ref:`⤆ </NXprocess/PARAMETERS-group>`

    Additional input axis to be used in the formula.

    .. _/NXcalibration/fit_formula_inputs/PARAMETER-field:

    .. index:: PARAMETER (field)

    :bolditalic:`PARAMETER`: (optional) :ref:`NX_CHAR <NX_CHAR>` 

      .. collapse:: The name of each ``PARAMETER`` is used as the symbol to be used in the ``fit ...

          The name of each ``PARAMETER`` is used as the symbol to be used in the ``fit_formula_description``, i.e.,
          if the field name is `my_field` you should refer to this axis by `my_field` in the ``fit_formula_description``.

      .. _/NXcalibration/fit_formula_inputs/PARAMETER@input_path-attribute:

      .. index:: input_path (field attribute)

      **@input_path**: (optional) :ref:`NX_CHAR <NX_CHAR>` 

        .. collapse:: The path from which this data is derived, e.g., raw detector axis. ...

            The path from which this data is derived, e.g., raw detector axis.
            Should be a valid NeXus path name, e.g., /entry/instrument/detector/raw.

  .. _/NXcalibration/calibration_parameters-group:

  **calibration_parameters**: (optional) :ref:`NXparameters` :ref:`⤆ </NXprocess/PARAMETERS-group>`

    .. collapse:: Fit coefficients to be used in ``fit_formula_description``. ...

        Fit coefficients to be used in ``fit_formula_description``.

        As an example, for nonlinear energy calibrations, e.g. in a time-of-flight (TOF) detector, a polynomial
        function is fitted to a set of features (peaks) at well defined energy positions to determine
        E(TOF). Here we can store the fit coefficients for that procedure.

    .. _/NXcalibration/calibration_parameters/aN-field:

    .. index:: aN (field)

    **a**\ :bolditalic:`N`: (optional) :ref:`NX_NUMBER <NX_NUMBER>` 

      .. collapse:: Use a0, a1, ..., an for the coefficients of a polynomial fit, corresponding  ...

          Use a0, a1, ..., an for the coefficients of a polynomial fit, corresponding to the values in the
          ``fit_formula_description``.

    .. _/NXcalibration/calibration_parameters/scaling_factor-field:

    .. index:: scaling_factor (field)

    **scaling_factor**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_ANY <NX_ANY>`} 

      .. collapse:: For linear calibration. Scaling parameter. ...

          For linear calibration. Scaling parameter.
          This should yield the relation `calibrated_axis` = (`original_axis` + `offset`) * `scaling_factor`.

          For a more detailed description of scaling factors, see
          :ref:`/NXdata/FIELDNAME_scaling_factor </NXdata/FIELDNAME_scaling_factor-field>`.

    .. _/NXcalibration/calibration_parameters/offset-field:

    .. index:: offset (field)

    **offset**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_ANY <NX_ANY>`} 

      .. collapse:: For linear calibration. Offset parameter. ...

          For linear calibration. Offset parameter.
          This should yield the relation `calibrated_axis` = (`original_axis` + `offset`) * `scaling_factor`.

          For a more detailed description of offset, see
          :ref:`/NXdata/FIELDNAME_offset </NXdata/FIELDNAME_offset-field>`.

  .. _/NXcalibration/DATA-group:

  :bolditalic:`DATA`: (optional) :ref:`NXdata` :ref:`⤆ </NXprocess/DATA-group>`

    .. collapse:: Any data acquired/used during the calibration that does not fit the `NX_FLOAT` ...

        Any data acquired/used during the calibration that does not fit the `NX_FLOAT` fields above.
        NXdata groups can be used for multidimensional data which are relevant to the calibration


Hypertext Anchors
-----------------

List of hypertext anchors for all groups, fields,
attributes, and links defined in this class.


* :ref:`/NXcalibration/applied-field </NXcalibration/applied-field>`
* :ref:`/NXcalibration/calibrated_axis-field </NXcalibration/calibrated_axis-field>`
* :ref:`/NXcalibration/calibration_object-group </NXcalibration/calibration_object-group>`
* :ref:`/NXcalibration/calibration_parameters-group </NXcalibration/calibration_parameters-group>`
* :ref:`/NXcalibration/calibration_parameters/aN-field </NXcalibration/calibration_parameters/aN-field>`
* :ref:`/NXcalibration/calibration_parameters/offset-field </NXcalibration/calibration_parameters/offset-field>`
* :ref:`/NXcalibration/calibration_parameters/scaling_factor-field </NXcalibration/calibration_parameters/scaling_factor-field>`
* :ref:`/NXcalibration/DATA-group </NXcalibration/DATA-group>`
* :ref:`/NXcalibration/description-field </NXcalibration/description-field>`
* :ref:`/NXcalibration/fit_formula_description-field </NXcalibration/fit_formula_description-field>`
* :ref:`/NXcalibration/fit_formula_inputs-group </NXcalibration/fit_formula_inputs-group>`
* :ref:`/NXcalibration/fit_formula_inputs/PARAMETER-field </NXcalibration/fit_formula_inputs/PARAMETER-field>`
* :ref:`/NXcalibration/fit_formula_inputs/PARAMETER@input_path-attribute </NXcalibration/fit_formula_inputs/PARAMETER@input_path-attribute>`
* :ref:`/NXcalibration/identifier_calibration_method-field </NXcalibration/identifier_calibration_method-field>`
* :ref:`/NXcalibration/identifier_calibration_reference-field </NXcalibration/identifier_calibration_reference-field>`
* :ref:`/NXcalibration/last_process-field </NXcalibration/last_process-field>`
* :ref:`/NXcalibration/mapping_MAPPING-field </NXcalibration/mapping_MAPPING-field>`
* :ref:`/NXcalibration/original_axis-field </NXcalibration/original_axis-field>`
* :ref:`/NXcalibration/original_axis@input_path-attribute </NXcalibration/original_axis@input_path-attribute>`
* :ref:`/NXcalibration/original_axis@symbol-attribute </NXcalibration/original_axis@symbol-attribute>`
* :ref:`/NXcalibration/physical_quantity-field </NXcalibration/physical_quantity-field>`
* :ref:`/NXcalibration@default-attribute </NXcalibration@default-attribute>`

**NXDL Source**:
  https://github.com/nexusformat/definitions/blob/main/base_classes/NXcalibration.nxdl.xml
