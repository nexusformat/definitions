.. auto-generated by dev_tools.docs.nxdl from the NXDL source contributed_definitions/NXapm_paraprobe_clusterer_config.nxdl.xml -- DO NOT EDIT

.. index::
    ! NXapm_paraprobe_clusterer_config (application definition)
    ! apm_paraprobe_clusterer_config (application definition)
    see: apm_paraprobe_clusterer_config (application definition); NXapm_paraprobe_clusterer_config

.. _NXapm_paraprobe_clusterer_config:

================================
NXapm_paraprobe_clusterer_config
================================

..
    Contributors List

**Status**:

  *application definition* (contribution), extends :ref:`NXapm_paraprobe_tool_config`

**Description**:

  .. collapse:: Application definition for a configuration file of the paraprobe-clusterer tool. ...

      Application definition for a configuration file of the paraprobe-clusterer tool.

      The tool paraprobe-clusterer evaluates how points cluster in space.

**Symbols**:

  The symbols used in the schema to specify e.g. dimensions of arrays.

  **n_ivec_max**: Maximum number of atoms per molecular ion. Should be 32 for paraprobe.

  **n_clust_algos**: Number of clustering algorithms used.

  **n_ions**: Number of different iontypes to distinguish during clustering.

**Groups cited**:
  :ref:`NXapm_paraprobe_tool_parameters`, :ref:`NXentry`, :ref:`NXnote`, :ref:`NXprocess`

.. index:: NXentry (base class); used in application definition, NXapm_paraprobe_tool_parameters (base class); used in application definition, NXnote (base class); used in application definition, NXprocess (base class); used in application definition

**Structure**:

  .. _/NXapm_paraprobe_clusterer_config/ENTRY-group:

  :bolditalic:`ENTRY`: (required) :ref:`NXentry` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY-group>`


    .. _/NXapm_paraprobe_clusterer_config/ENTRY/definition-field:

    .. index:: definition (field)

    **definition**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/definition-field>`


      Obligatory value: ``NXapm_paraprobe_clusterer_config``

    .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus-group:

    **cameca_to_nexus**: (optional) :ref:`NXapm_paraprobe_tool_parameters` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG-group>`

      .. collapse:: This process maps results from a cluster analysis made with IVAS / AP Suite ...

          This process maps results from a cluster analysis made with IVAS / AP Suite
          into an interoperable representation. IVAS / AP Suite usually exports such results
          as a list of reconstructed ion positions with one cluster label per position.
          These labels are reported via the mass-to-charge-state-ratio column of what is effectively
          a binary file that is formatted like a POS file but cluster labels written out using floating
          point numbers.

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/recover_evaporation_id-field:

      .. index:: recover_evaporation_id (field)

      **recover_evaporation_id**: (required) :ref:`NX_BOOLEAN <NX_BOOLEAN>` 

        .. collapse:: Specifies if paraprobe-clusterer should use the evaporation_ids from recon ...

            Specifies if paraprobe-clusterer should use the evaporation_ids from reconstruction
            for recovering for each position in the :ref:`NXnote` results the closest matching position
            (within floating point accuracy). This can be useful when users wish to recover the
            original evaporation_id, which IVAS /AP Suite drops when writing their *.indexed.* cluster
            results POS files that is referred to results.

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction-group:

      **reconstruction**: (required) :ref:`NXnote` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction-group>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/file_name-field:

        .. index:: file_name (field)

        **file_name**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction/file_name-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/checksum-field:

        .. index:: checksum (field)

        **checksum**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction/checksum-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/algorithm-field:

        .. index:: algorithm (field)

        **algorithm**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction/algorithm-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/position-field:

        .. index:: position (field)

        **position**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction/position-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/mass_to_charge-field:

        .. index:: mass_to_charge (field)

        **mass_to_charge**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG/reconstruction/mass_to_charge-field>`


      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results-group:

      **results**: (required) :ref:`NXnote` :ref:`⤆ </NXobject/NOTE-group>`

        .. collapse:: File with the results of the cluster analyses that was computed with IVAS  ...

            File with the results of the cluster analyses that was computed with IVAS / AP suite
            (e.g. maximum-separation method clustering algorithm `J. Hyde et al. <https://doi.org/10.1557/PROC-650-R6.6>`_).
            The information is stored in an improper (.indexed.) POS file as a matrix of floating
            point quadruplets, one quadruplet for each ion. The first three values of each
            quadruplet encode the position of the ion. The fourth value is the integer identifier
            of the cluster encoded as a floating point number.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/file_name-field:

        .. index:: file_name (field)

        **file_name**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/file_name-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/checksum-field:

        .. index:: checksum (field)

        **checksum**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/checksum-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/algorithm-field:

        .. index:: algorithm (field)

        **algorithm**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/algorithm-field>`


    .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID-group:

    **cluster_analysis**\ :bolditalic:`ID`: (optional) :ref:`NXapm_paraprobe_tool_parameters` :ref:`⤆ </NXapm_paraprobe_tool_config/ENTRY/TASKCONFIG-group>`

      .. collapse:: This process performs a cluster analysis on a ...

          This process performs a cluster analysis on a
          reconstructed dataset or a ROI within it.

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_type_filter-field:

      .. index:: ion_type_filter (field)

      **ion_type_filter**: (required) :ref:`NX_CHAR <NX_CHAR>` 

        .. collapse:: How should iontypes be considered during the cluster analysis. ...

            How should iontypes be considered during the cluster analysis.

            The value resolve_all will set an ion active
            in the analysis regardless of which iontype it is.

            The value resolve_unknown will set an ion active
            when it is of the UNKNOWNTYPE.

            The value resolve_ion will set an ion active
            if it is of the specific iontype, irregardless of its nuclide structure.

            The value resolve_element will set an ion active and account as many times
            for it, as the (molecular) ion contains atoms of elements in the whitelist
            ion_query_nuclide_vector.

            The value resolve_isotope will set an ion active and account as many times
            for it, as the (molecular) ion contains nuclides in the whitelist
            ion_query_nuclide_vector.

            In effect, ion_query_nuclide_vector acts as a whitelist to filter which ions are
            considered as source ions of the correlation statistics and how the multiplicity
            of each ion will be factorized.

            This is relevant as in atom probe we have the situation that an ion of a molecular
            ion with more than one nuclide, say Ti O for example is counted potentially several
            times because at that position (reconstructed) position it has been assumed  that
            there was a Ti and an O atom. This multiplicity affects the size of the feature and its
            chemical composition.

            Obligatory value: ``resolve_element``

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_query_nuclide_vector-field:

      .. index:: ion_query_nuclide_vector (field)

      **ion_query_nuclide_vector**: (required) :ref:`NX_UINT <NX_UINT>` (Rank: 2, Dimensions: [n_ions, n_ivec_max]) {units=\ :ref:`NX_UNITLESS <NX_UNITLESS>`} 

        .. collapse:: Matrix of nuclide vectors, as many as rows as different candidates ...

            Matrix of nuclide vectors, as many as rows as different candidates
            for iontypes should be distinguished as possible source iontypes.
            In the simplest case, the matrix contains only the proton number
            of the element in the row, all other values set to zero.

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance-group:

      **surface_distance**: (optional) :ref:`NXnote` :ref:`⤆ </NXapm_paraprobe_tool_parameters/surface_distance-group>`

        Distance between each ion and triangulated surface mesh.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/file_name-field:

        .. index:: file_name (field)

        **file_name**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/file_name-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/checksum-field:

        .. index:: checksum (field)

        **checksum**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/checksum-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/algorithm-field:

        .. index:: algorithm (field)

        **algorithm**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXnote/algorithm-field>`


        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/distance-field:

        .. index:: distance (field)

        **distance**: (required) :ref:`NX_CHAR <NX_CHAR>` :ref:`⤆ </NXapm_paraprobe_tool_parameters/surface_distance/distance-field>`


      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan-group:

      **dbscan**: (required) :ref:`NXprocess` 

        .. collapse:: Settings for DBScan clustering algorithm. For original details about the ...

            Settings for DBScan clustering algorithm. For original details about the
            algorithm and (performance-relevant) details consider:

            * `M. Ester et al. <https://dx.doi.org/10.5555/3001460.3001507>`_
            * `M. Götz et al. <https://dx.doi.org/10.1145/2834892.2834894>`_

            For details about how the DBScan algorithms is the key behind the
            specific modification known as the maximum-separation method in the
            atom probe community consider `E. Jägle et al. <https://dx.doi.org/10.1017/S1431927614013294>`_

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/high_throughput_method-field:

        .. index:: high_throughput_method (field)

        **high_throughput_method**: (required) :ref:`NX_CHAR <NX_CHAR>` 

          .. collapse:: Strategy how a set of cluster analyses with different parameter is execu ...

              Strategy how a set of cluster analyses with different parameter is executed:

              * For tuple as many runs are performed as parameter values have been defined.
              * For combinatorics individual parameter arrays are looped over.

              As an example we may provide ten entries for eps and three entries for min_pts.
              If high_throughput_method is set to tuple, the analysis is invalid because we have
              an insufficient number of min_pts values to pair them with our ten eps values.
              By contrast, if high_throughput_method is set to combinatorics, the tool will run three
              individual min_pts runs for each eps value, resulting in a total of 30 analyses.

              A typical example from the literature `M. Kühbach et al. <https://dx.doi.org/10.1038/s41524-020-00486-1>`_
              can be instructed via setting eps to an array of values np.linspace(0.2, 5.0, nums=241, endpoint=True),
              one min_pts value that is equal to 1, and high_throughput_method set to combinatorics.

              Any of these values: ``tuple`` | ``combinatorics``

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/eps-field:

        .. index:: eps (field)

        **eps**: (required) :ref:`NX_FLOAT <NX_FLOAT>` (Rank: 1, Dimensions: [i]) {units=\ :ref:`NX_LENGTH <NX_LENGTH>`} 

          Array of epsilon (eps) parameter values.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/min_pts-field:

        .. index:: min_pts (field)

        **min_pts**: (required) :ref:`NX_UINT <NX_UINT>` (Rank: 1, Dimensions: [j]) {units=\ :ref:`NX_UNITLESS <NX_UNITLESS>`} 

          Array of minimum points (min_pts) parameter values.

      .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan-group:

      **hdbscan**: (required) :ref:`NXprocess` 

        .. collapse:: Settings for the HPDBScan clustering algorithm. ...

            Settings for the HPDBScan clustering algorithm.

            * L. McInnes et al. <https://dx.doi.org/10.21105/joss.00205>`_
            * scikit-learn hdbscan library `<https://hdbscan.readthedocs.io/en/latest/how_hdbscan_works.html>`_

            See also this documentation for details about the parameter.
            Here we use the terminology of the hdbscan documentation.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/high_throughput_method-field:

        .. index:: high_throughput_method (field)

        **high_throughput_method**: (required) :ref:`NX_CHAR <NX_CHAR>` 

          .. collapse:: Strategy how runs with different parameter values are composed, ...

              Strategy how runs with different parameter values are composed,
              following the explanation for high_throughput_method of dbscan.

              Any of these values: ``tuple`` | ``combinatorics``

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_cluster_size-field:

        .. index:: min_cluster_size (field)

        **min_cluster_size**: (required) :ref:`NX_NUMBER <NX_NUMBER>` (Rank: 1, Dimensions: [i]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

          Array of min_cluster_size parameter values.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_samples-field:

        .. index:: min_samples (field)

        **min_samples**: (required) :ref:`NX_NUMBER <NX_NUMBER>` (Rank: 1, Dimensions: [j]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

          Array of min_samples parameter values.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/cluster_selection_epsilon-field:

        .. index:: cluster_selection_epsilon (field)

        **cluster_selection_epsilon**: (required) :ref:`NX_NUMBER <NX_NUMBER>` (Rank: 1, Dimensions: [k]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

          Array of cluster_selection parameter values.

        .. _/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/alpha-field:

        .. index:: alpha (field)

        **alpha**: (required) :ref:`NX_NUMBER <NX_NUMBER>` (Rank: 1, Dimensions: [m]) {units=\ :ref:`NX_ANY <NX_ANY>`} 

          Array of alpha parameter values.


Hypertext Anchors
-----------------

List of hypertext anchors for all groups, fields,
attributes, and links defined in this class.


* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY-group </NXapm_paraprobe_clusterer_config/ENTRY-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus-group </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction-group </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/algorithm-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/algorithm-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/checksum-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/checksum-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/file_name-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/file_name-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/mass_to_charge-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/mass_to_charge-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/position-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/reconstruction/position-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/recover_evaporation_id-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/recover_evaporation_id-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results-group </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/algorithm-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/algorithm-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/checksum-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/checksum-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/file_name-field </NXapm_paraprobe_clusterer_config/ENTRY/cameca_to_nexus/results/file_name-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID-group </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan-group </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/eps-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/eps-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/high_throughput_method-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/high_throughput_method-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/min_pts-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/dbscan/min_pts-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan-group </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/alpha-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/alpha-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/cluster_selection_epsilon-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/cluster_selection_epsilon-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/high_throughput_method-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/high_throughput_method-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_cluster_size-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_cluster_size-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_samples-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/hdbscan/min_samples-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_query_nuclide_vector-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_query_nuclide_vector-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_type_filter-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/ion_type_filter-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance-group </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance-group>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/algorithm-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/algorithm-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/checksum-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/checksum-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/distance-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/distance-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/file_name-field </NXapm_paraprobe_clusterer_config/ENTRY/cluster_analysisID/surface_distance/file_name-field>`
* :ref:`/NXapm_paraprobe_clusterer_config/ENTRY/definition-field </NXapm_paraprobe_clusterer_config/ENTRY/definition-field>`

**NXDL Source**:
  https://github.com/nexusformat/definitions/blob/main/contributed_definitions/NXapm_paraprobe_clusterer_config.nxdl.xml
