category: application
doc: |
  Application definition for transmission experiments
symbols:
  doc: |
    Variables used throughout the experiment
  N_wavelengths: |
    Number of wavelength points
  N_scans: |
    Number of scans

# FAIRmat consortium 21.07.2022
# Draft NeXus application definition for transmission experiments
type: group
NXtransmission(NXobject):
  (NXentry):
    definition:
      \@version:
        doc: |
          Version number to identify which definition of this application definition was
          used for this entry/data.
      \@URL:
        nameType: specified
        doc: |
          URL where to find further material (documentation, examples) relevant to the
          application definition.
      enumeration: [NXtransmission]
    start_time(NX_DATE_TIME):
      doc: |
        Start time of the experiment.
    experiment_identifier:
      doc: |
        Unique identifier of the experiment, such as a (globally persistent)
        unique identifier.
        
        * The identifier is usually defined by the facility or principle
          investigator.
        * The identifier enables to link experiments to e.g. proposals.
    experiment_description(NX_CHAR):
      exists: optional
      doc: |
        An optional free-text description of the experiment. However, details of the
        experiment should be defined in the specific fields of this application
        definition rather than in this experiment description.
    acquisition_program(NXfabrication):
      exists: optional
      model(NX_CHAR):
        doc: |
          Commercial or otherwise defined given name to the program that was
          used to generate the result file(s) with measured data and metadata.
      identifier:
        doc: |
          Version number of the program that was used to generate the result
          file(s) with measured data and metadata.
      \@url(NX_CHAR):
        exists: recommended
        doc: |
          Website of the software
    (NXuser):
      doc: |
        Contact information of at least the user of the instrument or the investigator
        who performed this experiment. Adding multiple users if relevant is recommended.
      name:
        doc: |
          Name of the user.
      affiliation:
        exists: recommended
        doc: |
          Name of the affiliation of the user at the point in time when the experiment was
          performed.
    instrument(NXinstrument):
      manufacturer(NXfabrication):
        exists: recommended
        doc: |
          Manufacturer of the instrument.
      common_beam_mask(NXslit):
        doc: |
          Common beam mask to shape the incident beam
        y_gap(NX_NUMBER):
          unit: NX_UNITLESS
          doc: |
            The height of the common beam in percentage of the beam
      common_beam_depolarizer(NX_BOOLEAN):
        doc: |
          If true, the incident beam is depolarized.
      polarizer(NX_NUMBER):
        unit: NX_ANGLE
        doc: |
          Polarizer value inside the beam path
      ref_attenuator(NXattenuator):
        doc: |
          Attenuator in the reference beam
        attenuator_transmission(NX_FLOAT):
      sample_attenuator(NXattenuator):
        doc: |
          Attenuator in the sample beam
        attenuator_transmission(NX_FLOAT):
      spectrometer(NXmonochromator):
        wavelength(NX_NUMBER):
          unit: NX_LENGTH
          doc: |
            Wavelength value(s) used for the measurement.
            An array of 1 or more elements. Length defines N_wavelenghts
          dimensions:
            rank: 1
            dim: (N_wavelengths,)
        spectral_resolution(NXresolution):
          exists: optional
          doc: |
            Overall spectral resolution of this spectrometer.
            If several gratings are employed the spectral resolution
            should rather be specified for each grating inside the
            NXgrating group of this spectrometer.
          resolution(NX_NUMBER):
            unit: NX_WAVENUMBER
        (NXgrating):
          exists: optional
          doc: |
            Diffraction grating, as could be used in a monochromator.
            If two or more gratings were used, define the angular
            dispersion and the wavelength range (min/max wavelength)
            for each grating and make sure that the wavelength ranges
            do not overlap. The dispersion should be defined for the
            entire wavelength range of the experiment.
          angular_dispersion(NX_NUMBER):
            exists: optional
            unit: NX_DIMENSIONLESS
            doc: |
              Dispersion of the grating in nm/mm used.
          blaze_wavelength(NX_NUMBER):
            exists: optional
            unit: NX_LENGTH
            doc: |
              The blaze wavelength of the grating used.
          spectral_resolution(NXresolution):
            exists: optional
            doc: |
              Overall spectral resolution of the instrument
              when this grating is used.
            resolution(NX_NUMBER):
              unit: NX_WAVENUMBER
          wavelength_range(NX_NUMBER):
            unit: NX_LENGTH
            doc: |
              Wavelength range in which this grating was used
            dimensions:
              rank: 1
              dim: (2,)
      (NXdetector):
        wavelength_range(NX_NUMBER):
          unit: NX_LENGTH
          doc: |
            Wavelength range in which this detector was used
          dimensions:
            rank: 1
            dim: (2,)
        type(NX_CHAR):
          doc: |
            Detector type
          enumeration: [PMT, PbS, InGaAs]
        response_time(NX_NUMBER):
          exists: optional
          unit: NX_TIME
          doc: |
            Response time of the detector
        gain(NX_NUMBER):
          exists: optional
          doc: |
            Detector gain
        slit(NXslit):
          doc: |
            Slit setting used for measurement with this detector
          type(NX_CHAR):
            enumeration: [fixed, servo]
      time_points(NX_NUMBER):
        exists: optional
        unit: NX_TIME
        doc: |
          An array of relative scan start time points.
        dimensions:
          rank: 1
          dim: (N_scans,)
      measured_data(NX_NUMBER):
        doc: |
          Resulting data from the measurement.
          The length of the 2nd dimension is
          the number of time points.
          If it has length one the time_points
          may be empty.
        dimensions:
          rank: 2
          dim: (N_scans, N_wavelengths)
      (NXsource):
        doc: |
          The lamp used for illumination
        type(NX_CHAR):
          doc: |
            The type of lamp, e.g. halogen, D2 etc.
          enumeration:
            open_enum: true
            items: [halogen, D2]
        spectrum(NX_NUMBER):
          exists: optional
          doc: |
            The spectrum of the lamp used
          dimensions:
            rank: 1
            dim: (N_wavelengths,)
        wavelength_range(NX_NUMBER):
          unit: NX_LENGTH
          doc: |
            Wavelength range in which the lamp was used
          dimensions:
            rank: 1
            dim: (2,)
    (NXsample):
      doc: |
        Properties of the sample measured
      name(NX_CHAR):
    data(NXdata):
      doc: |
        A default view of the data emitted intensity vs. wavelength.
        From measured_data plot intensity and wavelength.
      \@axes:
        doc: |
          We recommend to use wavelength as a default attribute, but it can be
          replaced by any suitable parameter along the X-axis.

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# 6a05b364c23b9cc2d8e352061b1288bafba56bb4358270f1b8a20f16c46dcdba
# <?xml version="1.0" encoding="UTF-8"?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2022-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <!--
# FAIRmat consortium 21.07.2022
# Draft NeXus application definition for transmission experiments-->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXtransmission" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <symbols>
#         <doc>
#             Variables used throughout the experiment
#         </doc>
#         <symbol name="N_wavelengths">
#             <doc>
#                 Number of wavelength points
#             </doc>
#         </symbol>
#         <symbol name="N_scans">
#             <doc>
#                 Number of scans
#             </doc>
#         </symbol>
#     </symbols>
#     <doc>
#         Application definition for transmission experiments
#     </doc>
#     <group type="NXentry">
#         <field name="definition">
#             <attribute name="version">
#                 <doc>
#                     Version number to identify which definition of this application definition was
#                     used for this entry/data.
#                 </doc>
#             </attribute>
#             <attribute name="URL" nameType="specified">
#                 <doc>
#                     URL where to find further material (documentation, examples) relevant to the
#                     application definition.
#                 </doc>
#             </attribute>
#             <enumeration>
#                 <item value="NXtransmission"/>
#             </enumeration>
#         </field>
#         <field name="start_time" type="NX_DATE_TIME">
#             <doc>
#                 Start time of the experiment.
#             </doc>
#         </field>
#         <field name="experiment_identifier">
#             <doc>
#                 Unique identifier of the experiment, such as a (globally persistent)
#                 unique identifier.
#                 
#                 * The identifier is usually defined by the facility or principle
#                   investigator.
#                 * The identifier enables to link experiments to e.g. proposals.
#             </doc>
#         </field>
#         <field name="experiment_description" type="NX_CHAR" optional="true">
#             <doc>
#                 An optional free-text description of the experiment. However, details of the
#                 experiment should be defined in the specific fields of this application
#                 definition rather than in this experiment description.
#             </doc>
#         </field>
#         <group name="acquisition_program" type="NXfabrication" optional="true">
#             <field name="model" type="NX_CHAR">
#                 <doc>
#                     Commercial or otherwise defined given name to the program that was
#                     used to generate the result file(s) with measured data and metadata.
#                 </doc>
#             </field>
#             <field name="identifier">
#                 <doc>
#                     Version number of the program that was used to generate the result
#                     file(s) with measured data and metadata.
#                 </doc>
#             </field>
#             <attribute name="url" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Website of the software
#                 </doc>
#             </attribute>
#         </group>
#         <group type="NXuser">
#             <doc>
#                 Contact information of at least the user of the instrument or the investigator
#                 who performed this experiment. Adding multiple users if relevant is recommended.
#             </doc>
#             <field name="name">
#                 <doc>
#                     Name of the user.
#                 </doc>
#             </field>
#             <field name="affiliation" recommended="true">
#                 <doc>
#                     Name of the affiliation of the user at the point in time when the experiment was
#                     performed.
#                 </doc>
#             </field>
#         </group>
#         <group name="instrument" type="NXinstrument">
#             <group name="manufacturer" type="NXfabrication" recommended="true">
#                 <doc>
#                     Manufacturer of the instrument.
#                 </doc>
#             </group>
#             <group name="common_beam_mask" type="NXslit">
#                 <doc>
#                     Common beam mask to shape the incident beam
#                 </doc>
#                 <field name="y_gap" type="NX_NUMBER" units="NX_UNITLESS">
#                     <doc>
#                         The height of the common beam in percentage of the beam
#                     </doc>
#                 </field>
#             </group>
#             <field name="common_beam_depolarizer" type="NX_BOOLEAN">
#                 <doc>
#                     If true, the incident beam is depolarized.
#                 </doc>
#             </field>
#             <field name="polarizer" type="NX_NUMBER" units="NX_ANGLE">
#                 <doc>
#                     Polarizer value inside the beam path
#                 </doc>
#             </field>
#             <group name="ref_attenuator" type="NXattenuator">
#                 <doc>
#                     Attenuator in the reference beam
#                 </doc>
#                 <field name="attenuator_transmission" type="NX_FLOAT"/>
#             </group>
#             <group name="sample_attenuator" type="NXattenuator">
#                 <doc>
#                     Attenuator in the sample beam
#                 </doc>
#                 <field name="attenuator_transmission" type="NX_FLOAT"/>
#             </group>
#             <group name="spectrometer" type="NXmonochromator">
#                 <field name="wavelength" type="NX_NUMBER" units="NX_LENGTH">
#                     <doc>
#                         Wavelength value(s) used for the measurement.
#                         An array of 1 or more elements. Length defines N_wavelenghts
#                     </doc>
#                     <dimensions rank="1">
#                         <dim index="1" value="N_wavelengths"/>
#                     </dimensions>
#                 </field>
#                 <group name="spectral_resolution" type="NXresolution" optional="true">
#                     <doc>
#                         Overall spectral resolution of this spectrometer.
#                         If several gratings are employed the spectral resolution
#                         should rather be specified for each grating inside the
#                         NXgrating group of this spectrometer.
#                     </doc>
#                     <field name="resolution" type="NX_NUMBER" units="NX_WAVENUMBER"/>
#                 </group>
#                 <group type="NXgrating" optional="true">
#                     <doc>
#                         Diffraction grating, as could be used in a monochromator.
#                         If two or more gratings were used, define the angular
#                         dispersion and the wavelength range (min/max wavelength)
#                         for each grating and make sure that the wavelength ranges
#                         do not overlap. The dispersion should be defined for the
#                         entire wavelength range of the experiment.
#                     </doc>
#                     <field name="angular_dispersion" type="NX_NUMBER" optional="true" units="NX_DIMENSIONLESS">
#                         <doc>
#                             Dispersion of the grating in nm/mm used.
#                         </doc>
#                     </field>
#                     <field name="blaze_wavelength" type="NX_NUMBER" optional="true" units="NX_LENGTH">
#                         <doc>
#                             The blaze wavelength of the grating used.
#                         </doc>
#                     </field>
#                     <group name="spectral_resolution" type="NXresolution" optional="true">
#                         <doc>
#                             Overall spectral resolution of the instrument
#                             when this grating is used.
#                         </doc>
#                         <field name="resolution" type="NX_NUMBER" units="NX_WAVENUMBER"/>
#                     </group>
#                     <field name="wavelength_range" type="NX_NUMBER" units="NX_LENGTH">
#                         <doc>
#                             Wavelength range in which this grating was used
#                         </doc>
#                         <dimensions rank="1">
#                             <dim index="1" value="2"/>
#                         </dimensions>
#                     </field>
#                 </group>
#             </group>
#             <group type="NXdetector">
#                 <field name="wavelength_range" type="NX_NUMBER" units="NX_LENGTH">
#                     <doc>
#                         Wavelength range in which this detector was used
#                     </doc>
#                     <dimensions rank="1">
#                         <dim index="1" value="2"/>
#                     </dimensions>
#                 </field>
#                 <field name="type" type="NX_CHAR">
#                     <doc>
#                         Detector type
#                     </doc>
#                     <enumeration>
#                         <item value="PMT"/>
#                         <item value="PbS"/>
#                         <item value="InGaAs"/>
#                     </enumeration>
#                 </field>
#                 <field name="response_time" type="NX_NUMBER" optional="true" units="NX_TIME">
#                     <doc>
#                         Response time of the detector
#                     </doc>
#                 </field>
#                 <field name="gain" type="NX_NUMBER" optional="true">
#                     <doc>
#                         Detector gain
#                     </doc>
#                 </field>
#                 <group name="slit" type="NXslit">
#                     <doc>
#                         Slit setting used for measurement with this detector
#                     </doc>
#                     <field name="type" type="NX_CHAR">
#                         <enumeration>
#                             <item value="fixed"/>
#                             <item value="servo"/>
#                         </enumeration>
#                     </field>
#                 </group>
#             </group>
#             <field name="time_points" type="NX_NUMBER" optional="true" units="NX_TIME">
#                 <doc>
#                     An array of relative scan start time points.
#                 </doc>
#                 <dimensions rank="1">
#                     <dim index="1" value="N_scans"/>
#                 </dimensions>
#             </field>
#             <field name="measured_data" type="NX_NUMBER">
#                 <doc>
#                     Resulting data from the measurement.
#                     The length of the 2nd dimension is
#                     the number of time points.
#                     If it has length one the time_points
#                     may be empty.
#                 </doc>
#                 <dimensions rank="2">
#                     <dim index="1" value="N_scans"/>
#                     <dim index="2" value="N_wavelengths"/>
#                 </dimensions>
#             </field>
#             <group type="NXsource">
#                 <doc>
#                     The lamp used for illumination
#                 </doc>
#                 <field name="type" type="NX_CHAR">
#                     <doc>
#                         The type of lamp, e.g. halogen, D2 etc.
#                     </doc>
#                     <enumeration open="true">
#                         <item value="halogen"/>
#                         <item value="D2"/>
#                     </enumeration>
#                 </field>
#                 <field name="spectrum" type="NX_NUMBER" optional="true">
#                     <doc>
#                         The spectrum of the lamp used
#                     </doc>
#                     <dimensions rank="1">
#                         <dim index="1" value="N_wavelengths"/>
#                     </dimensions>
#                 </field>
#                 <field name="wavelength_range" type="NX_NUMBER" units="NX_LENGTH">
#                     <doc>
#                         Wavelength range in which the lamp was used
#                     </doc>
#                     <dimensions rank="1">
#                         <dim index="1" value="2"/>
#                     </dimensions>
#                 </field>
#             </group>
#         </group>
#         <group type="NXsample">
#             <doc>
#                 Properties of the sample measured
#             </doc>
#             <field name="name" type="NX_CHAR"/>
#         </group>
#         <group name="data" type="NXdata">
#             <doc>
#                 A default view of the data emitted intensity vs. wavelength.
#                 From measured_data plot intensity and wavelength.
#             </doc>
#             <attribute name="axes">
#                 <doc>
#                     We recommend to use wavelength as a default attribute, but it can be
#                     replaced by any suitable parameter along the X-axis.
#                 </doc>
#             </attribute>
#         </group>
#     </group>
# </definition>
