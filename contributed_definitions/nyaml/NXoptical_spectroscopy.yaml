category: application
doc: |
  A general application definition of optical spectroscopy elements, which may
  be used as a template to derive specialized optical spectroscopy experiments.
  
  Possible specializations are ellipsometry, Raman spectroscopy, photoluminescence,
  reflectivity/transmission spectroscopy.
  
  A general optical experiment consists of (i) a light/photon source, (ii) a sample,
  (iii) a detector.
  
  For any free text descriptions, it is recommended to enter data in english
  language, as this is the most FAIR representation.
symbols:
  doc: |
    Variables used throughout the document, e.g. dimensions or parameters.
  N_spectrum: |
    Length of the spectrum array (e.g. wavelength or energy) of the measured
    data.
  N_measurements: |
    Number of measurements (1st dimension of measured_data array). This is
    equal to the number of parameters scanned. For example, if the experiment
    was performed at three different temperatures and two different pressures
    N_measurements = 2*3 = 6.

# 04/2024
# Extension of the Draft Version (05/2023) of a NeXus application definition which
# serves as a template for various optical spectroscopy experiments
# TODO:
# - Add NXlens_opt and NXwaveplate to NXinstrument?
# - Make polfilter_TYPE(NXbeam_device) own base class -\-> rework NXpolarizer_opt. and add them to NXinstrument.
# - Make spectralfilter_TYPE(NXbeam_device) own base class -\-> extend NXfilter?  and add them to NXinstrument.
# - Make offset angles for polar and azimutal?
# - Can angle_reference_frame be replaced later by only using reference_frames and generic angle description?
# - Add optical elements and rework them: NXfiber, NXbeam_splitter,
# - Consider to make power flux recommended? Difficult parameter to measure. Relevant for some samples/techniques, but not for all. Powder density? Nominal vs. measured?
# - Is there something to describe the spot size?
# - Restructure the concept "type" in "source_TYPE" to medium and model(NXfabication) -\-> suggestion from Markus: "splitting up the concept into type(NXfabrication) and emitting medium(NXion/NXatom) is a better alternative?"
# - How to describe beam size properties? NXbeam/extend? Is this enough? or do we need more abitrary shapes as elliptically? Maybe as well focus spot size?
# - Think of removing/reworking of (optional) NXfabrications? Con: bloats up the NeXus def (move it to base classes?) Pro: as the fixed name device_information is used, the structure is more FAIR / clean designed?
type: group
NXoptical_spectroscopy(NXobject):
  (NXentry):
    definition:
      doc: |
        An application definition describing a general optical experiment.
      \@version:
        doc: |
          Version number to identify which definition of this application
          definition was used for this entry/data.
      \@URL:
        exists: recommended
        doc: |
          URL where to find further material (documentation, examples) relevant
          to the application definition.
      enumeration: [NXoptical_spectroscopy]
    title:
      exists: recommended
    start_time(NX_DATE_TIME):
      exists: recommended
      doc: |
        Datetime of the start of the measurement.
        Should be a ISO8601 date/time stamp. It is recommended to add an explicit time zone,
        otherwise, the local time zone is assumed per ISO8601.
        
        It is required to enter at least one of both measurement times, either "start_time" or "end_time".
    end_time(NX_DATE_TIME):
      exists: recommended
      doc: |
        Datetime of the end of the measurement.
        Should be a ISO8601 date/time stamp. It is recommended to add an explicit time zone,
        otherwise the local time zone is assumed per ISO8601.
        
        It is required to enter at least one of both measurement times, either "start_time" or "end_time".
    experiment_identifier(NXidentifier):
      exists: recommended
      doc: |
        A (globally persistent) unique identifier of the experiment.
        (i) The identifier is usually defined by the facility, laboratory or
        principal investigator.
        (ii) The identifier enables to link experiments to e.g. proposals.
      service(NX_CHAR):
        exists: optional
      identifier(NX_CHAR):
        exists: recommended
      identifier_type:
        exists: recommended
        doc: |
          Select the range of validity of this identier.
          Local: Setup#1 at Institute building #2 in Room #3
          Global: Unique identification of with by unique location and unique
          globally persistent time stamp.
        enumeration: [local, global]
      is_persistent(NX_BOOLEAN):
        exists: optional
    experiment_description:
      exists: optional
      doc: |
        An optional free-text description of the experiment.
        
        Users are strongly advised to parameterize the description of their experiment
        by using respective groups and fields and base classes instead of writing prose
        into this field.
        
        The reason is that such a free-text field is difficult to machine-interpret.
        The motivation behind keeping this field for now is to learn how far the
        current base classes need extension based on user feedback.
    experiment_type:
      doc: |
        Specify the type of the optical experiment.
        
        Chose other if none of these methods are suitable. You may specify
        fundamental characteristics or properties in the experimental sub-type.
        
        For Raman spectroscopy or ellipsometry use the respective specializations
        of NXoptical_spectroscopy.
      enumeration: [photoluminescence, transmission spectroscopy, reflection spectroscopy, other]
    experiment_sub_type:
      exists: optional
      doc: |
        Specify a special property or characteristic of the experiment, which specifies
        the generic experiment type.
      enumeration: [time resolved, imaging, pump-probe, other]
    experiment_type_other:
      exists: optional
      doc: |
        If "other" was selected in "experiment_type" and/or in "experiment_sub_type",
        specify the experiment here with a free text name, which is knwon in the
        respective community of interest.
    reference_frames(NXcoordinate_system_set):
      exists: optional
      doc: |
        Description of one or more coordinate systems that are specific to the
        experiment. Examples are beam centered, sample-normal centered,
        laboratory-system centered, sample-stage centered, crystal-symmetry centered.
      beam_ref_frame(NXcoordinate_system):
        exists: optional
        depends_on(NX_CHAR):
          doc: |
            This refers to the coordinate system along the beam path. The origin and
            base is defined at z=0, where the incident beam hits the sample at the surface.
        (NXtransformations):
          doc: |
            This is the default NeXus coordinate system (McStas), if the transformation
            does not change the coordinate system at all - i.e. it is unity.
            Otherwise, by this a respective transformation of the beam
            reference frame to the default reference frame could be made. i.e.
            exchange of x and z coordinate, rotation of respective coordinates
            towards each other.
      sample_normal_ref_frame(NXcoordinate_system):
        exists: optional
        depends_on(NX_CHAR):
          doc: |
            Link to transformations defining the sample-normal base coordinate system,
            which is defined such that the positive z-axis is parallel to the sample normal,
            and the x-y-plane lies inside the sample surface.
        (NXtransformations):
          doc: |
            Set of transformations, describing the orientation of the sample-normal coordinate system
            with respect to the beam coordinate system (.).
    (NXuser):
      exists: ['min', '0', 'max', 'unbounded']
      doc: |
        Contact information and eventually details of at persons who
        performed the measurements. This can be for example the principal
        investigator or student. Examples are: name, affiliation, address, telephone
        number, email, role as well as identifiers such as orcid or similar.
        It is recommended to add multiple users if relevant.
        
        Due to data privacy concerns, there is no minimum requirement.
        If no user with specific name is allowed to be given, it is required to
        assign at least an affiliation
    (NXinstrument):
      doc: |
        Devices or elements of the optical spectroscopy setup described with its
        properties and general information.
        
        This includes for example:
        - The beam device's or instrument's model, company, serial number, construction year, etc.
        - Used software or code
        - Experiment descriptive parameters as reference frames, resolution, calibration
        - Photon beams with their respective properties such as angles and polarization
        - Various optical beam path devices, which interact, manipulate or measure optical beams
        - Characteristics of the medium surrounding the sample
        - "Beam devices" for a beam path description
        - Stages(NXmanipulator)
        - Sensors and actuators to control or measure sample or beam properties
      beam_TYPE(NXbeam):
        exists: ['min', '1', 'max', 'unbounded']
        nameType: partial
        doc: |
          This can be used to describe properties of a photon beam.
          A beam is always defined between two beam_devices, via
          "previous_device" and "next_device".
          
          It is required to define at least one incident beam which is incident
          to the sample. You may specify if this beam parameters are acutally measured
          or just nominal.
          If this beam is the output of a source, chose the same
          name appendix as for the NXsource instance (e.g. TYPE=532nm)
        parameter_reliability:
          doc: |
            Select the reliability of the respective beam characteristics. Either,
            the parameters are measured via another device or method or just given
            nominally via the properties of a light source properties (532nm, 100mW).
          enumeration: [measured, nominal]
        incident_wavelength(NX_NUMBER):
          exists: recommended
        incident_wavelength_spread(NX_NUMBER):
          exists: recommended
        incident_polarization(NX_NUMBER):
          exists: recommended
        extent(NX_FLOAT):
          exists: recommended
        associated_source(NX_CHAR):
          exists: optional
          doc: |
            The path to the device which emitted this beam (light source or frequency doubler).
            
            This parameter is recommended, if the previous optical element is a photon source.
            In this way, the properties of the laser or light souce can be described
            and associated.
            The beam should be named with the same appendix as the source, e.g.,
            for TYPE=532nmlaser, there should be both a NXsource named
            "source_532nmlaser" and a NXbeam named "beam_532nmlaser".
            
            Example: /entry/instrument/source_532nmlaser
        
        # The two polarization descriptions may be completely replaced by polarization
        beam_polarization_type:
          exists: optional
          enumeration: [linear, circular, ellipically, unpolarized]
        linear_beam_sample_polarization(NX_NUMBER):
          exists: optional
          unit: NX_ANGLE
          doc: |
            Angle of the linear polarized light, with respect to a fixed arbitrary
            defined 0° position. This can be used if no definition of respective
            cooridnate systems for beam and sample normal is done. If coordinate systems
            are defined, refer to beam "incident_polarization".
      detector_TYPE(NXdetector):
        exists: ['min', '1', 'max', 'unbounded']
        nameType: partial
        detector_channel_type:
          exists: recommended
          enumeration: [single-channel, multichannel]
        detector_type:
          exists: recommended
          doc: |
            Description of the detector type.
          enumeration: [CCD, photomultiplier, photodiode, avalanche-photodiode, streak camera, bolometer, golay detectors, pyroelectric detector, deuterated triglycine sulphate, other]
        detector_type_other:
          exists: optional
          doc: |
            Type of detector, if "other" was selected in "detector_type".
        raw_data(NXdata):
          exists: recommended
          doc: |
            Contains the raw data collected by the detector before calibration.
            The data which is considered raw might change from experiment to experiment
            due to hardware pre-processing of the data.
            This field ideally collects the data with the lowest level of processing
            possible.
          
          # Define a similar convention for NXoptical_spectroscopy? Or only for NXraman, NXellipsometry and NXphotoluminescence?
          # Fields should be named according to new following convention:
          # - **pixel_x**: Detector pixel in x direction.
          # - **pixel_y**: Detector pixel in y direction.
          # - **energy**: (Un)calibrated energy (kinetic or binding energy). Unit category: NX_ENERGY (e.g., eV).
          # - **kx**: (Un)calibrated x axis in k-space. Unit category: NX_ANY (e.g., 1/Angström).
          # - **ky**: (Un)calibrated y axis in k-space. Unit category: NX_ANY (1/Angström).
          # - **kz**: (Un)calibrated z axis in k-space. Unit category: NX_ANY (1/Angström).
          # - **angular0**: Fast-axis angular coordinate (or second slow axis if angularly integrated).
          # Unit category: NX_ANGLE
          # - **angular1**: Slow-axis angular coordinate (or second fast axis if simultaneously dispersed in 2 dimensions)
          # Unit category: NX_ANGLE
          # - **spatial0**: Fast-axis spatial coordinate (or second slow axis if spatially integrated)
          # Unit category: NX_LENGTH
          # - **spatial1**: Slow-axis spatial coordinate (or second fast axis if simultaneously dispersed in 2 dimensions)
          # Unit category: NX_LENGTH
          # - **delay**: Calibrated delay time. Unit category: NX_TIME (s).
          # - **polarization_angle**: Linear polarization angle of the incoming or
          # outgoing beam.
          # Unit category: NX_ANGLE (° or rad)
          # - **ellipticity**: Ellipticity of the incoming or outgoing beam.
          # Unit category: NX_ANGLE (° or rad)
          # - **time_of_flight**: Total time of flight. Unit category: NX_TIME_OF_FLIGHT
          # - **time_of_flight_adc**: Time-of-flight values, analog-to-digital converted.
          # - **external_AXIS**: Describes an axis which is coming from outside the detectors scope.
          \@signal:
            enumeration: [raw]
          raw(NX_NUMBER):
            doc: |
              Raw data before calibration.
        additional_detector_hardware:
          exists: optional
          doc: |
            Specify respective hardware which was used for the detector. For
            example special electronics required for time-correlated single photon
            counting (TCSPC).
        device_information(NXfabrication):
          exists: recommended
      source_TYPE(NXsource):
        exists: recommended
        nameType: partial
        type:
          exists: recommended
          enumeration: [Synchrotron X-ray Source, Rotating Anode X-ray, Fixed Tube X-ray, UV Laser, Optical Laser, Laser, Dye-Laser, Broadband Tunable Light Source, Halogen lamp, LED, Mercury Cadmium Telluride, Deuterium Lamp, Xenon Lamp, Globar, other]
        type_other:
          exists: optional
          doc: |
            Specification of type, may also go to name.
        name:
          exists: recommended
        standard:
          exists: optional
          doc: |
            If available, name/ID/norm of the light source standard.
        device_information(NXfabrication):
          exists: recommended
          doc: |
            Details about the device information.
        associated_beam(NX_CHAR):
          exists: recommended
          doc: |
            The path to a beam emitted by this source.
            Should be named with the same appendix, e.g.,
            for TYPE=532nmlaser, there should as well be
            a NXbeam named "beam_532nmlaser" together with this source
            instance named "source_532nmlaser"
            
            Example: /entry/instrument/beam_532nmlaser
      (NXmonochromator):
        exists: recommended
        device_information(NXfabrication):
          exists: recommended
      angle_reference_frame:
        exists: recommended
        doc: |
          Defines the reference frame which is used to describe the sample orientation
          with respect to the beam directions.
          
          A beam centered description is the default and uses 4 angles(similar to XRD):
            - Omega (angle between sample surface and incident beam)
            - 2Theta (angle between the transmitted beam and the detection beam)
            - Chi (sample tilt angle, angle between plane#1 and the surface normal,
                  plane#1 = spanned by incidence beam and detection
                  and detection. If Chi=0°, then plane#1 is the plane of
                  incidence in reflection setups)
            - Phi (inplane rotation of sample, rotation axis is the samples
                  surface normal)
          
          
          A sample normal centered description is as well possible:
            - angle of incidence (angle between incident beam and sample surface)
            - angle of detection (angle between detection beam and sample surface)
            - angle of incident and detection beam
            - angle of in-plane sample rotation (direction along the sample's surface normal)
          
          An arbitrary reference frame can be defined by "reference_frames"
          and used via "instrument/angle_sample_and_beam_TYPE"
        enumeration: [beam centered, sample-normal centered]
      omega(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Angle between sample incident beam and sample surface.
      twotheta(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Angle between incident and detection beam
      chi(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Sample tilt between sample normal, and the plane spanned by detection and
          incident beam.
      phi(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Inplane rotation of the sample, with rotation axis along sample normal.
      angle_of_incidence(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Angle(s) of the incident beam vs. the normal of the bottom reflective
          (substrate) surface in the sample. These two directions span the plane
          of incidence.
      angle_of_detection(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Detection angle(s) of the beam reflected or scattered off the sample
          vs. the normal of the bottom reflective (substrate) surface in the
          sample if not equal to the angle(s) of incidence.
          These two directions span the plane of detection.
      angle_of_incident_and_detection_beam(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Angle between the incident and detection beam.
          If angle_of_detection + angle_of_incidence = angle_of_incident_and_detection_beam,
          then the setup is a reflection setup.
          If angle_of_detection + angle_of_incidence != angle_of_incident_and_detection_beam
          then the setup may be a light scattering setup.
          (i.e. 90° + 90° != 90°, i.e. incident and detection beam in the sample surface, but
          the angle source-sample-detector is 90°)
      angle_of_in_plane_sample_rotation(NX_NUMBER):
        exists: optional
        unit: NX_ANGLE
        doc: |
          Angle of the inplane orientation of the sample. This might be an arbitrary,
          angle without specific relation to the sample symmetry,
          of the angle to a specific sample property (i.e. crystallographic axis or sample
          shape such as wafer flat)
      generic_beam_sample_angle_TYPE(NXtransformations):
        exists: recommended
        nameType: partial
        doc: |
          Set of transformations, describing the relative orientation of different
          parts of the experiment (beams or sample). You may select one of the specified
          angles for incident and detection beam or sample, and then use polar and azimuthal
          angles to define the direction via sperical coordinates.
          This allows consistent defintion between different coordinate system.
          You may refer to self defined coordinate system as well.
          
          
          If "angle_reference_frame = beam centered", then this coordinate system is used:
          McStas system (NeXus default)
          (https://manual.nexusformat.org/design.html#mcstas-and-nxgeometry-system)
          
          i.e. the z-coordinate math:`[0,0,1]` is along the incident beam direction and
          the x-coordinate math:`[1,0,0]` is in the horizontal plane. Hence, usually math:`[0,1,0]`
          is vertically oriented.
          
          If "angle_reference_frame = sample-normal centered", then this coordinate
          system is used
          z - math:`[0,0,1]` along sample surface normal
          x - math:`[1,0,0]` defined by sample surface projected incident beam.
          y - math:`[0,1,0]` in the sample surface, orthogonal to z and x.
          For this case, x may be ill defined, if the incident beam is perpendicular
          to the sample surface. In this case, use the beam centered description.
        type:
          enumeration: [incident beam, detection beam, sample]
        polar(NX_NUMBER):
          unit: NX_ANGLE
          doc: |
            Rotation about the y axis (polar rotation within the sample plane).
          \@transformation_type:
            enumeration: [rotation]
          \@vector:
            enumeration: [[0, 1, 0]]
          \@depends_on:
            doc: |
              Path to a transformation that places the sample surface
              into the origin of the arpes_geometry coordinate system.
        azimuth(NX_NUMBER):
          unit: NX_ANGLE
          doc: |
            Rotation about the z axis (azimuthal rotation within the sample plane).
          \@transformation_type:
            enumeration: [rotation]
          \@vector:
            enumeration: [[0, 0, 1]]
          \@depends_on:
            enumeration: [offset_tilt]
      lateral_focal_point_offset(NX_NUMBER):
        exists: optional
        unit: NX_LENGTH
        doc: |
          Specify if there is a lateral offset on the sample surface, between the focal
          points of the incident beam and the detection beam.
      (NXbeam_device):
        exists: ['min', '0', 'max', 'unbounded']
        doc: |
          Describes the order of respective beam devices in the optical beam
          path.
          
          Everything object which interacts or modifies optical beam properties,
          may be an beam device, e.g. Filter, Window, Beamsplitter, Photon Source,
          Detector, etc,
          
          It is intended, to include this functionality later to "older" beam
          components, such as NXsource, NXdetector, NXlens, etc.
          Until this is possbible, auxillary beam devices have to be created,
          for each "older" beam component instead, to allow a beam path description.
          To link the auxillary beam device to the real device properties, the
          attribute \@device should be used.
        \@device:
          exists: recommended
          doc: |
            Reference to beam device, which is described by a NeXus concept
            (e.g. for NXsource, entry/instrument/source_TYPE).
        previous_device:
          exists: recommended
          doc: |
            Reference to the previous beam device, from which the photon beam came
            to reach this beam device. A photon source is related as origin by ".".
            This enables a logical order description of the optical setup.
      (NXlens_opt):
        exists: optional
        doc: |
          This is the optical element used to focus or collect light. This may
          be a genereic lens or microcope objectives which are used for the
          Raman scattering process.
        type:
          enumeration: [objective, lens, glass fiber, none, other]
        device_information(NXfabrication):
          exists: optional
      (NXwaveplate):
        exists: optional
      (NXopt_window):
        exists: optional
      polfilter_TYPE(NXbeam_device):
        exists: optional
        doc: |
          polarization filter to prepare light to be measured or to be incident
          on the sample.
          Genereric polarization filter porperties may be implemented via NXfilter_pol
          at a later stage.
        filter_mechanism(NX_CHAR):
          exists: optional
          doc: |
            Physical principle of the polarization filter used to create a
            defined incident or scattered light state.
          enumeration: [polarization by Fresnel reflection, birefringent polarizers, thin film polarizers, wire-grid polarizers, other]
        specific_polarization_filter_type(NX_CHAR):
          exists: optional
          doc: |
            Specific name or type of the polarizer used.
            
            Free text, for example: Glan-Thompson, Glan-Taylor, Rochon Prism, Wollaston
            Polarizer...
        device_information(NXfabrication):
          exists: optional
      spectralfilter_TYPE(NXbeam_device):
        exists: optional
        nameType: partial
        doc: |
          Spectral filter used to modify properties of the scattered or incident light.
          Genereric spectral filter porperties may be implemented via NXfilter_spec
          at a later stage.
        filter_type:
          exists: optional
          doc: |
            Type of laserline filter used to supress the laser, if measurements
            close to the laserline are performed.
          enumeration: [long-pass filter, short-pass filter, notch filter, reflection filter, neutral density filter, other]
        intended_use:
          exists: optional
          doc: |
            Type of laserline filter used to supress the laser, if measurements
            close to the laserline are performed.
          enumeration: [laser line cleanup, raylight line removal, spectral filtering, intensity manipulation, other]
        filter_characteristics(NXdata):
          exists: optional
          doc: |
            Properties of the spectral filter such as wavelength dependent Transmission
            or reflectivity.
          \@characteristics_type:
            exists: optional
            doc: |
              Which property is used to form the spectral properties of light,
              i.e. transmission or reflection properties.
            enumeration: [transmission, reflection]
        device_information(NXfabrication):
          exists: optional
      
      # Later for rework of specific optical elements
      # (NXbeam_splitter):
      # exists: optional
      # doc: |
      # Can be used to describe a beam splitter as optical element.
      (NXbeam_transfer_matrix_table):
        exists: optional
        doc: |
          Allows description of beam properties via matrices, which relate ingoing with
          outgoing beam properties.
      sample_stage(NXmanipulator):
        exists: optional
        doc: |
          Sample stage (or manipulator) for positioning of the sample. This should
          only contain the spatial orientation of movement.
        stage_type:
          exists: optional
          doc: |
            Specify the type of the sample stage.
          enumeration: [manual stage, scanning stage, liquid stage, gas cell, cryostat, heater, other]
        stage_type_other:
          exists: optional
          doc: |
            If "other" was chosen in stage_type, enter here a free text description
            of the stage type.
        transformations(NXtransformations):
          exists: optional
          doc: |
            This allows a description of the stages relation or orientation and
            position with respect to the sample or beam, if an laboratory or
            an stage coordinate system is defined.
        beam_sample_relation:
          exists: optional
          doc: |
            Description of relation of the beam with the sample. How dit the
            sample hit the beam, e.g. 'center of sample, long edge parallel
            to the plane of incidence'.
            Is redundent, if a full orientation description is done via the
            stages "transformations" entry.
        device_information(NXfabrication):
          exists: optional
      temperature_sensor(NXsensor):
        exists: recommended
        name:
          exists: recommended
        measurement:
          enumeration: [temperature]
        type:
          exists: optional
        value(NX_FLOAT):
        device_information(NXfabrication):
          exists: optional
      temp_control_TYPE(NXactuator):
        exists: optional
        nameType: partial
        doc: |
          Type of control for the sample temperature. Replace TYPE by "cryostat" or
          "heater" to specify it.
        name:
          exists: recommended
        physical_quantity:
          enumeration: [temperature]
        cooler_or_heater:
          exists: recommended
          enumeration: [cooler, heater]
        type:
          exists: optional
          doc: |
            Hardware used for actuation, i.e. laser, gas lamp, filament, resistive
        (NXpid):
          exists: recommended
          setpoint(NX_FLOAT):
            exists: recommended
        device_information(NXfabrication):
          exists: optional
      device_information(NXfabrication):
        exists: recommended
        doc: |
          General device information of the optical spectroscopy setup, if
          suitable (e.g. for a tabletop spectrometer or other non-custom build setups).
          For custom build setups, this may be limited to the construction year.
        vendor:
          exists: recommended
        model:
          exists: recommended
        identifier(NXidentifier):
          exists: recommended
        construction_year(NX_DATE_TIME):
          exists: optional
      software_TYPE(NXprogram):
        exists: recommended
        nameType: partial
        program:
          doc: |
            Commercial or otherwise defined given name of the program that was
            used to control any parts of the optical spectroscopy setup.
            The uppercase TYPE should be replaced by a specification name, i.e.
            "software_detector" or "software_stage" to specify the respective
            program or software components.
          \@version:
            exists: recommended
            doc: |
              Either version with build number, commit hash, or description of a
              (online) repository where the source code of the program and build
              instructions can be found so that the program can be configured in
              such a way that result files can be created ideally in a
              deterministic manner.
          \@URL:
            exists: optional
            doc: |
              Description of the software by persistent resource, where the program,
              code, script etc. can be found.
      instrument_calibration_DEVICE(NXcalibration):
        exists: recommended
        nameType: partial
        doc: |
          Pre-calibration of an arbitrary device of the instrumental setup, which
          has the name DEVICE. You can specify here how, at which time by which method
          the calibration was done. As well the accuracy and a link to the calibration
          dataset.
        device_path:
          exists: recommended
          doc: |
            Path to the device, which was calibrated.
            Example: entry/instrument/DEVICE
        calibration_accuracy(NXdata):
          exists: optional
          doc: |
            Provide data about the determined accuracy of the device, this may
            may be a single value or a dataset like wavelength error vs. wavelength etc.
        calibration_status(NX_CHAR):
          exists: recommended
          doc: |
            Was a calibration performed? If yes, when was it done? If the
            calibration time is provided, it should be specified in
            ENTRY/INSTRUMENT/calibration/calibration_time.
          enumeration: [calibration time provided, no calibration, within 1 hour, within 1 day, within 1 week]
        calibration_time(NX_DATE_TIME):
          exists: optional
          doc: |
            If calibtration status is 'calibration time provided', specify the
            ISO8601 date when calibration was last performed before this
            measurement. UTC offset should be specified.
        (NXdata):
          exists: optional
          doc: |
            Generic data which does not fit to the 'NX_FLOAT' fields in NXproces.
            This can be for example the instrument response function.
      wavelength_resolution(NXresolution):
        exists: optional
        doc: |
          The overall resolution of the optical instrument.
        physical_quantity:
          enumeration: [wavelength]
        type:
          exists: recommended
        resolution(NX_FLOAT):
          unit: NX_WAVELENGTH
          doc: |
            Minimum distinguishable wavelength separation of peaks in spectra.
      sample_medium_refractive_indices(NX_FLOAT):
        exists: optional
        unit: NX_UNITLESS
        doc: |
          Array of pairs of complex refractive indices n + ik of the medium
          for every measured spectral point/wavelength/energy.
          Only necessary if the measurement was performed not in air, or
          something very well known, e.g. high purity water.
        dimensions:
          rank: 2
          dim: (2, N_spectrum)
    (NXsample):
      doc: |
        Properties of the sample, such as sample type, layer structure,
        chemical formula, atom types, its history etc.
        Information about the sample stage and sample environment should be
        described in ENTRY/INSTRUMENT/sample_stage.
      name:
      sample_id:
        exists: recommended
        doc: |
          Locally unique ID of the sample, used in the reasearch institute or group.
      physical_form:
        exists: recommended
        doc: |
          State the form of the sample, examples are:
          thin film, single crystal, poly crystal, amorphous, single layer,
          multi layer, liquid, gas, pellet, powder.
          Generic properties of liquids or gases see NXsample properties.
      description:
        exists: optional
        doc: |
          Free text description of the sample.
      chemical_formula:
        exists: recommended
        doc: |
          Chemical formula of the sample. Use the Hill system (explained here:
          https://en.wikipedia.org/wiki/Chemical_formula#Hill_system) to write
          the chemical formula. In case the sample consists of several layers,
          this should be a list of the chemical formulas of the individual
          layers, where the first entry is the chemical formula of the top
          layer (the one on the front surface, on which the light incident).
          The order must be consistent with layer_structure
      atom_types:
        exists: optional
        doc: |
          List of comma-separated elements from the periodic table that are
          contained in the sample. If the sample substance has multiple
          components, all elements from each component must be included in
          'atom_types'.
      preparation_date(NX_DATE_TIME):
        exists: recommended
        doc: |
          ISO 8601 time code with local time zone offset to UTC information
          when the specimen was prepared.
          
          Ideally, report the end of the preparation, i.e. the last known timestamp when
          the measured specimen surface was actively prepared.
      history(NXhistory):
        exists: recommended
        doc: |
          A set of activities that occurred to the sample prior to/during the experiment.
      temperature_env(NXenvironment):
        exists: recommended
        doc: |
          Sample temperature (either controlled or just measured).
        temperature_nominal:
          exists: optional
          doc: |
            If no sensor was available for the determination of temperature, selected
            a nominal value which represents approximately the situation of sample temperature.
          enumeration: [room temperature, liquid helium temperature, liquid nitrogen temperature, other]
        temperature_nominal_other(NX_NUMBER):
          exists: optional
          unit: NX_TEMPERATURE
          doc: |
            If temperature_nominal is "other", enter here a nominal/assumed/estimated
            sample temperature.
      (NXenvironment):
        exists: optional
        doc: |
          Arbirary sample property which may be varied during the experiment
          and controlled by a device. Examples are pressure, voltage, magnetic field etc.
          Similar to the temperautre description of the sample.
        sample_medium:
          exists: recommended
          doc: |
            Medium, in which the sample is placed.
          enumeration: [air, vacuum, inert atmosphere, oxidising atmosphere, reducing atmosphere, sealed can, water, other]
      
      # Make something like NXlayer_structure_sample?
      thickness(NX_NUMBER):
        exists: optional
        unit: NX_LENGTH
        doc: |
          (Measured) sample thickness.
          
          The information is recorded to qualify if the light used was likely
          able to shine through the sample.
          
          In this case the value should be set to the actual thickness of
          the specimen viewed for an illumination situation where the nominal
          surface normal of the specimen is parallel to the optical axis.
      thickness_determination:
        exists: optional
        doc: |
          If a thickness if given, please specify how this thickness was estimated or
          determined.
      
      # Maybe consider here to include NXsample_component_set.
      layer_structure:
        exists: optional
        doc: |
          Qualitative description of the layer structure for the sample,
          starting with the top layer (i.e. the one on the front surface, on
          which the light incident), e.g. native oxide/bulk substrate, or
          Si/native oxide/thermal oxide/polymer/peptide.
      sample_orientation:
        exists: optional
        doc: |
          Specify the sample orientation, how is its sample normal oriented
          relative in the laboratory reference frame, incident beam reference
          frame.
      substrate:
        exists: recommended
        doc: |
          If the sample is grown or fixed on a substrate, specify this here by
          a free text description.
    (NXdata):
      doc: |
        Here generic types of data may be saved.. This may refer to data derived
        from single or multiple raw measurements (i.e. several intensities are
        evaluated for different parameters: ellipsometry -> psi and delta) -
        i.e. non-raw data.
        As well plotable data may be stored/linked here, which provides the most suitable
        representation of the data (for the respective community).
        
        You may provide multiple instances of NXdata
      \@axes:
        doc: |
          Spectrum, i.e. x-axis of the data (e.g. wavelength, energy etc.)
      \@signal:
        doc: |
          Spectrum, i.e. y-axis of the data (e.g. counts, intensity)
    measurement_data_calibration_TYPE(NXprocess):
      nameType: partial
      exists: recommended
      wavelength_calibration(NXcalibration):
        exists: optional
        calibrated_axis(NX_FLOAT):
          exists: recommended
          doc: |
            Location to save the calibrated wavelength data.
    
    # The old "data_collection(NXprocess)" is now replaced by more flexbile
    # NXdata. The detailed inclusion of a data collection description (i.e.
    # raw data from ellipsometry as polarization values to the usually used
    # psi and delta values), will be done later after the NXopt workshop.
    derived_parameters(NXprocess):
      exists: optional
      doc: |
        Parameters that are derived from the measured data.
      depolarization(NX_NUMBER):
        exists: optional
        unit: NX_UNITLESS
        doc: |
          Light loss due to depolarization as a value in [0-1].
        dimensions:
          rank: 3
          dim: (N_measurements, 1, N_spectrum)
      jones_quality_factor(NX_NUMBER):
        exists: optional
        unit: NX_UNITLESS
        doc: |
          Jones quality factor.
        dimensions:
          rank: 3
          dim: (N_measurements, 1, N_spectrum)
      reflectivity(NX_NUMBER):
        exists: optional
        unit: NX_UNITLESS
        doc: |
          Reflectivity.
        dimensions:
          rank: 3
          dim: (N_measurements, 1, N_spectrum)
      transmittance(NX_NUMBER):
        exists: optional
        unit: NX_UNITLESS
        doc: |
          Transmittance.
        dimensions:
          rank: 3
          dim: (N_measurements, 1, N_spectrum)
      ANALYSIS_program(NXprocess):
        exists: optional
        nameType: partial
        program:
          doc: |
            Commercial or otherwise defined given name of the program that was
            used to generate or calculate the derived parameters.
            If home written, one can provide the actual steps in the NOTE
            subfield here.
        version:
          doc: |
            Either version with build number, commit hash, or description of a
            (online) repository where the source code of the program and build
            instructions can be found so that the program can be configured in
            such a way that result files can be created ideally in a
            deterministic manner.

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# 12c67a466e389862f20db7d4af090899e2ef8d60fc58ace7c28a837421a208a1
# <?xml version='1.0' encoding='UTF-8'?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2023-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <!--
# 04/2024
# Extension of the Draft Version (05/2023) of a NeXus application definition which
# serves as a template for various optical spectroscopy experiments
# TODO:
# - Add NXlens_opt and NXwaveplate to NXinstrument?
# - Make polfilter_TYPE(NXbeam_device) own base class -\-> rework NXpolarizer_opt. and add them to NXinstrument.
# - Make spectralfilter_TYPE(NXbeam_device) own base class -\-> extend NXfilter?  and add them to NXinstrument.
# - Make offset angles for polar and azimutal?
# - Can angle_reference_frame be replaced later by only using reference_frames and generic angle description?
# - Add optical elements and rework them: NXfiber, NXbeam_splitter,
# - Consider to make power flux recommended? Difficult parameter to measure. Relevant for some samples/techniques, but not for all. Powder density? Nominal vs. measured?
# - Is there something to describe the spot size?
# - Restructure the concept "type" in "source_TYPE" to medium and model(NXfabication) -\-> suggestion from Markus: "splitting up the concept into type(NXfabrication) and emitting medium(NXion/NXatom) is a better alternative?"
# - How to describe beam size properties? NXbeam/extend? Is this enough? or do we need more abitrary shapes as elliptically? Maybe as well focus spot size?
# - Think of removing/reworking of (optional) NXfabrications? Con: bloats up the NeXus def (move it to base classes?) Pro: as the fixed name device_information is used, the structure is more FAIR / clean designed?-->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXoptical_spectroscopy" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <symbols>
#         <doc>
#              Variables used throughout the document, e.g. dimensions or parameters.
#         </doc>
#         <symbol name="N_spectrum">
#             <doc>
#                  Length of the spectrum array (e.g. wavelength or energy) of the measured
#                  data.
#             </doc>
#         </symbol>
#         <symbol name="N_measurements">
#             <doc>
#                  Number of measurements (1st dimension of measured_data array). This is
#                  equal to the number of parameters scanned. For example, if the experiment
#                  was performed at three different temperatures and two different pressures
#                  N_measurements = 2*3 = 6.
#             </doc>
#         </symbol>
#     </symbols>
#     <doc>
#          A general application definition of optical spectroscopy elements, which may
#          be used as a template to derive specialized optical spectroscopy experiments.
#          
#          Possible specializations are ellipsometry, Raman spectroscopy, photoluminescence,
#          reflectivity/transmission spectroscopy.
#          
#          A general optical experiment consists of (i) a light/photon source, (ii) a sample,
#          (iii) a detector.
#          
#          For any free text descriptions, it is recommended to enter data in english
#          language, as this is the most FAIR representation.
#     </doc>
#     <group type="NXentry">
#         <field name="definition">
#             <doc>
#                  An application definition describing a general optical experiment.
#             </doc>
#             <attribute name="version">
#                 <doc>
#                      Version number to identify which definition of this application
#                      definition was used for this entry/data.
#                 </doc>
#             </attribute>
#             <attribute name="URL">
#                 <doc>
#                      URL where to find further material (documentation, examples) relevant
#                      to the application definition.
#                 </doc>
#             </attribute>
#             <enumeration>
#                 <item value="NXoptical_spectroscopy"/>
#             </enumeration>
#         </field>
#         <field name="title" recommended="true"/>
#         <field name="start_time" type="NX_DATE_TIME" recommended="true">
#             <doc>
#                  Datetime of the start of the measurement.
#                  Should be a ISO8601 date/time stamp. It is recommended to add an explicit time zone,
#                  otherwise, the local time zone is assumed per ISO8601.
#                  
#                  It is required to enter at least one of both measurement times, either "start_time" or "end_time".
#             </doc>
#         </field>
#         <field name="end_time" type="NX_DATE_TIME" recommended="true">
#             <doc>
#                  Datetime of the end of the measurement.
#                  Should be a ISO8601 date/time stamp. It is recommended to add an explicit time zone,
#                  otherwise the local time zone is assumed per ISO8601.
#                  
#                  It is required to enter at least one of both measurement times, either "start_time" or "end_time".
#             </doc>
#         </field>
#         <group name="experiment_identifier" type="NXidentifier" recommended="true">
#             <doc>
#                  A (globally persistent) unique identifier of the experiment.
#                  (i) The identifier is usually defined by the facility, laboratory or
#                  principal investigator.
#                  (ii) The identifier enables to link experiments to e.g. proposals.
#             </doc>
#             <field name="service" type="NX_CHAR" optional="true"/>
#             <field name="identifier" type="NX_CHAR" recommended="true"/>
#             <field name="identifier_type" recommended="true">
#                 <doc>
#                      Select the range of validity of this identier.
#                      Local: Setup#1 at Institute building #2 in Room #3
#                      Global: Unique identification of with by unique location and unique
#                      globally persistent time stamp.
#                 </doc>
#                 <enumeration>
#                     <item value="local"/>
#                     <item value="global"/>
#                 </enumeration>
#             </field>
#             <field name="is_persistent" type="NX_BOOLEAN" optional="true"/>
#         </group>
#         <field name="experiment_description" optional="true">
#             <doc>
#                  An optional free-text description of the experiment.
#                  
#                  Users are strongly advised to parameterize the description of their experiment
#                  by using respective groups and fields and base classes instead of writing prose
#                  into this field.
#                  
#                  The reason is that such a free-text field is difficult to machine-interpret.
#                  The motivation behind keeping this field for now is to learn how far the
#                  current base classes need extension based on user feedback.
#             </doc>
#         </field>
#         <field name="experiment_type">
#             <doc>
#                  Specify the type of the optical experiment.
#                  
#                  Chose other if none of these methods are suitable. You may specify
#                  fundamental characteristics or properties in the experimental sub-type.
#                  
#                  For Raman spectroscopy or ellipsometry use the respective specializations
#                  of NXoptical_spectroscopy.
#             </doc>
#             <enumeration>
#                 <item value="photoluminescence"/>
#                 <item value="transmission spectroscopy"/>
#                 <item value="reflection spectroscopy"/>
#                 <item value="other"/>
#             </enumeration>
#         </field>
#         <field name="experiment_sub_type" optional="true">
#             <doc>
#                  Specify a special property or characteristic of the experiment, which specifies
#                  the generic experiment type.
#             </doc>
#             <enumeration>
#                 <item value="time resolved"/>
#                 <item value="imaging"/>
#                 <item value="pump-probe"/>
#                 <item value="other"/>
#             </enumeration>
#         </field>
#         <field name="experiment_type_other" optional="true">
#             <doc>
#                  If "other" was selected in "experiment_type" and/or in "experiment_sub_type",
#                  specify the experiment here with a free text name, which is knwon in the
#                  respective community of interest.
#             </doc>
#         </field>
#         <group name="reference_frames" type="NXcoordinate_system_set" optional="true">
#             <doc>
#                  Description of one or more coordinate systems that are specific to the
#                  experiment. Examples are beam centered, sample-normal centered,
#                  laboratory-system centered, sample-stage centered, crystal-symmetry centered.
#             </doc>
#             <group name="beam_ref_frame" type="NXcoordinate_system" optional="true">
#                 <field name="depends_on" type="NX_CHAR">
#                     <doc>
#                          This refers to the coordinate system along the beam path. The origin and
#                          base is defined at z=0, where the incident beam hits the sample at the surface.
#                     </doc>
#                 </field>
#                 <group type="NXtransformations">
#                     <doc>
#                          This is the default NeXus coordinate system (McStas), if the transformation
#                          does not change the coordinate system at all - i.e. it is unity.
#                          Otherwise, by this a respective transformation of the beam
#                          reference frame to the default reference frame could be made. i.e.
#                          exchange of x and z coordinate, rotation of respective coordinates
#                          towards each other.
#                     </doc>
#                 </group>
#             </group>
#             <group name="sample_normal_ref_frame" type="NXcoordinate_system" optional="true">
#                 <field name="depends_on" type="NX_CHAR">
#                     <doc>
#                          Link to transformations defining the sample-normal base coordinate system,
#                          which is defined such that the positive z-axis is parallel to the sample normal,
#                          and the x-y-plane lies inside the sample surface.
#                     </doc>
#                 </field>
#                 <group type="NXtransformations">
#                     <doc>
#                          Set of transformations, describing the orientation of the sample-normal coordinate system
#                          with respect to the beam coordinate system (.).
#                     </doc>
#                 </group>
#             </group>
#         </group>
#         <group type="NXuser" minOccurs="0" maxOccurs="unbounded">
#             <doc>
#                  Contact information and eventually details of at persons who
#                  performed the measurements. This can be for example the principal
#                  investigator or student. Examples are: name, affiliation, address, telephone
#                  number, email, role as well as identifiers such as orcid or similar.
#                  It is recommended to add multiple users if relevant.
#                  
#                  Due to data privacy concerns, there is no minimum requirement.
#                  If no user with specific name is allowed to be given, it is required to
#                  assign at least an affiliation
#             </doc>
#         </group>
#         <group type="NXinstrument">
#             <doc>
#                  Devices or elements of the optical spectroscopy setup described with its
#                  properties and general information.
#                  
#                  This includes for example:
#                  - The beam device's or instrument's model, company, serial number, construction year, etc.
#                  - Used software or code
#                  - Experiment descriptive parameters as reference frames, resolution, calibration
#                  - Photon beams with their respective properties such as angles and polarization
#                  - Various optical beam path devices, which interact, manipulate or measure optical beams
#                  - Characteristics of the medium surrounding the sample
#                  - "Beam devices" for a beam path description
#                  - Stages(NXmanipulator)
#                  - Sensors and actuators to control or measure sample or beam properties
#             </doc>
#             <group name="beam_TYPE" type="NXbeam" minOccurs="1" maxOccurs="unbounded">
#                 <doc>
#                      This can be used to describe properties of a photon beam.
#                      A beam is always defined between two beam_devices, via
#                      "previous_device" and "next_device".
#                      
#                      It is required to define at least one incident beam which is incident
#                      to the sample. You may specify if this beam parameters are acutally measured
#                      or just nominal.
#                      If this beam is the output of a source, chose the same
#                      name appendix as for the NXsource instance (e.g. TYPE=532nm)
#                 </doc>
#                 <field name="parameter_reliability">
#                     <doc>
#                          Select the reliability of the respective beam characteristics. Either,
#                          the parameters are measured via another device or method or just given
#                          nominally via the properties of a light source properties (532nm, 100mW).
#                     </doc>
#                     <enumeration>
#                         <item value="measured"/>
#                         <item value="nominal"/>
#                     </enumeration>
#                 </field>
#                 <field name="incident_wavelength" type="NX_NUMBER" recommended="true"/>
#                 <field name="incident_wavelength_spread" type="NX_NUMBER" recommended="true"/>
#                 <field name="incident_polarization" type="NX_NUMBER" recommended="true"/>
#                 <field name="extent" type="NX_FLOAT" recommended="true"/>
#                 <field name="associated_source" type="NX_CHAR" optional="true">
#                     <doc>
#                          The path to the device which emitted this beam (light source or frequency doubler).
#                          
#                          This parameter is recommended, if the previous optical element is a photon source.
#                          In this way, the properties of the laser or light souce can be described
#                          and associated.
#                          The beam should be named with the same appendix as the source, e.g.,
#                          for TYPE=532nmlaser, there should be both a NXsource named
#                          "source_532nmlaser" and a NXbeam named "beam_532nmlaser".
#                          
#                          Example: /entry/instrument/source_532nmlaser
#                     </doc>
#                 </field>
#                 <!--The two polarization descriptions may be completely replaced by polarization-->
#                 <field name="beam_polarization_type" optional="true">
#                     <enumeration>
#                         <item value="linear"/>
#                         <item value="circular"/>
#                         <item value="ellipically"/>
#                         <item value="unpolarized"/>
#                     </enumeration>
#                 </field>
#                 <field name="linear_beam_sample_polarization" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                     <doc>
#                          Angle of the linear polarized light, with respect to a fixed arbitrary
#                          defined 0° position. This can be used if no definition of respective
#                          cooridnate systems for beam and sample normal is done. If coordinate systems
#                          are defined, refer to beam "incident_polarization".
#                     </doc>
#                 </field>
#             </group>
#             <group name="detector_TYPE" type="NXdetector" minOccurs="1" maxOccurs="unbounded">
#                 <field name="detector_channel_type">
#                     <enumeration>
#                         <item value="single-channel"/>
#                         <item value="multichannel"/>
#                     </enumeration>
#                 </field>
#                 <field name="detector_type" recommended="true">
#                     <doc>
#                          Description of the detector type.
#                     </doc>
#                     <enumeration>
#                         <item value="CCD"/>
#                         <item value="photomultiplier"/>
#                         <item value="photodiode"/>
#                         <item value="avalanche-photodiode"/>
#                         <item value="streak camera"/>
#                         <item value="bolometer"/>
#                         <item value="golay detectors"/>
#                         <item value="pyroelectric detector"/>
#                         <item value="deuterated triglycine sulphate"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="detector_type_other" optional="true">
#                     <doc>
#                          Type of detector, if "other" was selected in "detector_type".
#                     </doc>
#                 </field>
#                 <group name="raw_data" type="NXdata" recommended="true">
#                     <doc>
#                          Contains the raw data collected by the detector before calibration.
#                          The data which is considered raw might change from experiment to experiment
#                          due to hardware pre-processing of the data.
#                          This field ideally collects the data with the lowest level of processing
#                          possible.
#                     </doc>
#                     <!--Define a similar convention for NXoptical_spectroscopy? Or only for NXraman, NXellipsometry and NXphotoluminescence?
# Fields should be named according to new following convention:
# - **pixel_x**: Detector pixel in x direction.
# - **pixel_y**: Detector pixel in y direction.
# - **energy**: (Un)calibrated energy (kinetic or binding energy). Unit category: NX_ENERGY (e.g., eV).
# - **kx**: (Un)calibrated x axis in k-space. Unit category: NX_ANY (e.g., 1/Angström).
# - **ky**: (Un)calibrated y axis in k-space. Unit category: NX_ANY (1/Angström).
# - **kz**: (Un)calibrated z axis in k-space. Unit category: NX_ANY (1/Angström).
# - **angular0**: Fast-axis angular coordinate (or second slow axis if angularly integrated).
# Unit category: NX_ANGLE
# - **angular1**: Slow-axis angular coordinate (or second fast axis if simultaneously dispersed in 2 dimensions)
# Unit category: NX_ANGLE
# - **spatial0**: Fast-axis spatial coordinate (or second slow axis if spatially integrated)
# Unit category: NX_LENGTH
# - **spatial1**: Slow-axis spatial coordinate (or second fast axis if simultaneously dispersed in 2 dimensions)
# Unit category: NX_LENGTH
# - **delay**: Calibrated delay time. Unit category: NX_TIME (s).
# - **polarization_angle**: Linear polarization angle of the incoming or
# outgoing beam.
# Unit category: NX_ANGLE (° or rad)
# - **ellipticity**: Ellipticity of the incoming or outgoing beam.
# Unit category: NX_ANGLE (° or rad)
# - **time_of_flight**: Total time of flight. Unit category: NX_TIME_OF_FLIGHT
# - **time_of_flight_adc**: Time-of-flight values, analog-to-digital converted.
# - **external_AXIS**: Describes an axis which is coming from outside the detectors scope.-->
#                     <attribute name="signal">
#                         <enumeration>
#                             <item value="raw"/>
#                         </enumeration>
#                     </attribute>
#                     <field name="raw" type="NX_NUMBER">
#                         <doc>
#                              Raw data before calibration.
#                         </doc>
#                     </field>
#                 </group>
#                 <field name="additional_detector_hardware" optional="true">
#                     <doc>
#                          Specify respective hardware which was used for the detector. For
#                          example special electronics required for time-correlated single photon
#                          counting (TCSPC).
#                     </doc>
#                 </field>
#                 <group name="device_information" type="NXfabrication" recommended="true"/>
#             </group>
#             <group name="source_TYPE" type="NXsource" recommended="true">
#                 <field name="type" recommended="true">
#                     <enumeration>
#                         <item value="Synchrotron X-ray Source"/>
#                         <item value="Rotating Anode X-ray"/>
#                         <item value="Fixed Tube X-ray"/>
#                         <item value="UV Laser"/>
#                         <item value="Optical Laser"/>
#                         <item value="Laser"/>
#                         <item value="Dye-Laser"/>
#                         <item value="Broadband Tunable Light Source"/>
#                         <item value="Halogen lamp"/>
#                         <item value="LED"/>
#                         <item value="Mercury Cadmium Telluride"/>
#                         <item value="Deuterium Lamp"/>
#                         <item value="Xenon Lamp"/>
#                         <item value="Globar"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="type_other" optional="true">
#                     <doc>
#                          Specification of type, may also go to name.
#                     </doc>
#                 </field>
#                 <field name="name" recommended="true"/>
#                 <field name="standard" optional="true">
#                     <doc>
#                          If available, name/ID/norm of the light source standard.
#                     </doc>
#                 </field>
#                 <group name="device_information" type="NXfabrication" recommended="true">
#                     <doc>
#                          Details about the device information.
#                     </doc>
#                 </group>
#                 <field name="associated_beam" type="NX_CHAR" recommended="true">
#                     <doc>
#                          The path to a beam emitted by this source.
#                          Should be named with the same appendix, e.g.,
#                          for TYPE=532nmlaser, there should as well be
#                          a NXbeam named "beam_532nmlaser" together with this source
#                          instance named "source_532nmlaser"
#                          
#                          Example: /entry/instrument/beam_532nmlaser
#                     </doc>
#                 </field>
#             </group>
#             <group type="NXmonochromator" recommended="true">
#                 <group name="device_information" type="NXfabrication" recommended="true"/>
#             </group>
#             <field name="angle_reference_frame" recommended="true">
#                 <doc>
#                      Defines the reference frame which is used to describe the sample orientation
#                      with respect to the beam directions.
#                      
#                      A beam centered description is the default and uses 4 angles(similar to XRD):
#                        - Omega (angle between sample surface and incident beam)
#                        - 2Theta (angle between the transmitted beam and the detection beam)
#                        - Chi (sample tilt angle, angle between plane#1 and the surface normal,
#                              plane#1 = spanned by incidence beam and detection
#                              and detection. If Chi=0°, then plane#1 is the plane of
#                              incidence in reflection setups)
#                        - Phi (inplane rotation of sample, rotation axis is the samples
#                              surface normal)
#                      
#                      
#                      A sample normal centered description is as well possible:
#                        - angle of incidence (angle between incident beam and sample surface)
#                        - angle of detection (angle between detection beam and sample surface)
#                        - angle of incident and detection beam
#                        - angle of in-plane sample rotation (direction along the sample's surface normal)
#                      
#                      An arbitrary reference frame can be defined by "reference_frames"
#                      and used via "instrument/angle_sample_and_beam_TYPE"
#                 </doc>
#                 <enumeration>
#                     <item value="beam centered"/>
#                     <item value="sample-normal centered"/>
#                 </enumeration>
#             </field>
#             <field name="omega" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Angle between sample incident beam and sample surface.
#                 </doc>
#             </field>
#             <field name="twotheta" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Angle between incident and detection beam
#                 </doc>
#             </field>
#             <field name="chi" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Sample tilt between sample normal, and the plane spanned by detection and
#                      incident beam.
#                 </doc>
#             </field>
#             <field name="phi" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Inplane rotation of the sample, with rotation axis along sample normal.
#                 </doc>
#             </field>
#             <field name="angle_of_incidence" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Angle(s) of the incident beam vs. the normal of the bottom reflective
#                      (substrate) surface in the sample. These two directions span the plane
#                      of incidence.
#                 </doc>
#             </field>
#             <field name="angle_of_detection" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Detection angle(s) of the beam reflected or scattered off the sample
#                      vs. the normal of the bottom reflective (substrate) surface in the
#                      sample if not equal to the angle(s) of incidence.
#                      These two directions span the plane of detection.
#                 </doc>
#             </field>
#             <field name="angle_of_incident_and_detection_beam" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Angle between the incident and detection beam.
#                      If angle_of_detection + angle_of_incidence = angle_of_incident_and_detection_beam,
#                      then the setup is a reflection setup.
#                      If angle_of_detection + angle_of_incidence != angle_of_incident_and_detection_beam
#                      then the setup may be a light scattering setup.
#                      (i.e. 90° + 90° != 90°, i.e. incident and detection beam in the sample surface, but
#                      the angle source-sample-detector is 90°)
#                 </doc>
#             </field>
#             <field name="angle_of_in_plane_sample_rotation" type="NX_NUMBER" optional="true" units="NX_ANGLE">
#                 <doc>
#                      Angle of the inplane orientation of the sample. This might be an arbitrary,
#                      angle without specific relation to the sample symmetry,
#                      of the angle to a specific sample property (i.e. crystallographic axis or sample
#                      shape such as wafer flat)
#                 </doc>
#             </field>
#             <group name="generic_beam_sample_angle_TYPE" type="NXtransformations" recommended="true">
#                 <doc>
#                      Set of transformations, describing the relative orientation of different
#                      parts of the experiment (beams or sample). You may select one of the specified
#                      angles for incident and detection beam or sample, and then use polar and azimuthal
#                      angles to define the direction via sperical coordinates.
#                      This allows consistent defintion between different coordinate system.
#                      You may refer to self defined coordinate system as well.
#                      
#                      
#                      If "angle_reference_frame = beam centered", then this coordinate system is used:
#                      McStas system (NeXus default)
#                      (https://manual.nexusformat.org/design.html#mcstas-and-nxgeometry-system)
#                      
#                      i.e. the z-coordinate math:`[0,0,1]` is along the incident beam direction and
#                      the x-coordinate math:`[1,0,0]` is in the horizontal plane. Hence, usually math:`[0,1,0]`
#                      is vertically oriented.
#                      
#                      If "angle_reference_frame = sample-normal centered", then this coordinate
#                      system is used
#                      z - math:`[0,0,1]` along sample surface normal
#                      x - math:`[1,0,0]` defined by sample surface projected incident beam.
#                      y - math:`[0,1,0]` in the sample surface, orthogonal to z and x.
#                      For this case, x may be ill defined, if the incident beam is perpendicular
#                      to the sample surface. In this case, use the beam centered description.
#                 </doc>
#                 <field name="type">
#                     <enumeration>
#                         <item value="incident beam"/>
#                         <item value="detection beam"/>
#                         <item value="sample"/>
#                     </enumeration>
#                 </field>
#                 <field name="polar" type="NX_NUMBER" units="NX_ANGLE">
#                     <doc>
#                          Rotation about the y axis (polar rotation within the sample plane).
#                     </doc>
#                     <attribute name="transformation_type">
#                         <enumeration>
#                             <item value="rotation"/>
#                         </enumeration>
#                     </attribute>
#                     <attribute name="vector">
#                         <enumeration>
#                             <item value="[0, 1, 0]"/>
#                         </enumeration>
#                     </attribute>
#                     <attribute name="depends_on">
#                         <doc>
#                              Path to a transformation that places the sample surface
#                              into the origin of the arpes_geometry coordinate system.
#                         </doc>
#                     </attribute>
#                 </field>
#                 <field name="azimuth" type="NX_NUMBER" units="NX_ANGLE">
#                     <doc>
#                          Rotation about the z axis (azimuthal rotation within the sample plane).
#                     </doc>
#                     <attribute name="transformation_type">
#                         <enumeration>
#                             <item value="rotation"/>
#                         </enumeration>
#                     </attribute>
#                     <attribute name="vector">
#                         <enumeration>
#                             <item value="[0, 0, 1]"/>
#                         </enumeration>
#                     </attribute>
#                     <attribute name="depends_on">
#                         <enumeration>
#                             <item value="offset_tilt"/>
#                         </enumeration>
#                     </attribute>
#                 </field>
#             </group>
#             <field name="lateral_focal_point_offset" type="NX_NUMBER" optional="true" units="NX_LENGTH">
#                 <doc>
#                      Specify if there is a lateral offset on the sample surface, between the focal
#                      points of the incident beam and the detection beam.
#                 </doc>
#             </field>
#             <group type="NXbeam_device" minOccurs="0" maxOccurs="unbounded">
#                 <doc>
#                      Describes the order of respective beam devices in the optical beam
#                      path.
#                      
#                      Everything object which interacts or modifies optical beam properties,
#                      may be an beam device, e.g. Filter, Window, Beamsplitter, Photon Source,
#                      Detector, etc,
#                      
#                      It is intended, to include this functionality later to "older" beam
#                      components, such as NXsource, NXdetector, NXlens, etc.
#                      Until this is possbible, auxillary beam devices have to be created,
#                      for each "older" beam component instead, to allow a beam path description.
#                      To link the auxillary beam device to the real device properties, the
#                      attribute \@device should be used.
#                 </doc>
#                 <attribute name="device" recommended="true">
#                     <doc>
#                          Reference to beam device, which is described by a NeXus concept
#                          (e.g. for NXsource, entry/instrument/source_TYPE).
#                     </doc>
#                 </attribute>
#                 <field name="previous_device" recommended="true">
#                     <doc>
#                          Reference to the previous beam device, from which the photon beam came
#                          to reach this beam device. A photon source is related as origin by ".".
#                          This enables a logical order description of the optical setup.
#                     </doc>
#                 </field>
#             </group>
#             <group type="NXlens_opt" optional="true">
#                 <doc>
#                      This is the optical element used to focus or collect light. This may
#                      be a genereic lens or microcope objectives which are used for the
#                      Raman scattering process.
#                 </doc>
#                 <field name="type">
#                     <enumeration>
#                         <item value="objective"/>
#                         <item value="lens"/>
#                         <item value="glass fiber"/>
#                         <item value="none"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <group type="NXwaveplate" optional="true"/>
#             <group type="NXopt_window" optional="true"/>
#             <group name="polfilter_TYPE" type="NXbeam_device" optional="true">
#                 <doc>
#                      polarization filter to prepare light to be measured or to be incident
#                      on the sample.
#                      Genereric polarization filter porperties may be implemented via NXfilter_pol
#                      at a later stage.
#                 </doc>
#                 <field name="filter_mechanism" type="NX_CHAR" optional="true">
#                     <doc>
#                          Physical principle of the polarization filter used to create a
#                          defined incident or scattered light state.
#                     </doc>
#                     <enumeration>
#                         <item value="polarization by Fresnel reflection"/>
#                         <item value="birefringent polarizers"/>
#                         <item value="thin film polarizers"/>
#                         <item value="wire-grid polarizers"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="specific_polarization_filter_type" type="NX_CHAR" optional="true">
#                     <doc>
#                          Specific name or type of the polarizer used.
#                          
#                          Free text, for example: Glan-Thompson, Glan-Taylor, Rochon Prism, Wollaston
#                          Polarizer...
#                     </doc>
#                 </field>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <group name="spectralfilter_TYPE" type="NXbeam_device" optional="true">
#                 <doc>
#                      Spectral filter used to modify properties of the scattered or incident light.
#                      Genereric spectral filter porperties may be implemented via NXfilter_spec
#                      at a later stage.
#                 </doc>
#                 <field name="filter_type" optional="true">
#                     <doc>
#                          Type of laserline filter used to supress the laser, if measurements
#                          close to the laserline are performed.
#                     </doc>
#                     <enumeration>
#                         <item value="long-pass filter"/>
#                         <item value="short-pass filter"/>
#                         <item value="notch filter"/>
#                         <item value="reflection filter"/>
#                         <item value="neutral density filter"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="intended_use" optional="true">
#                     <doc>
#                          Type of laserline filter used to supress the laser, if measurements
#                          close to the laserline are performed.
#                     </doc>
#                     <enumeration>
#                         <item value="laser line cleanup"/>
#                         <item value="raylight line removal"/>
#                         <item value="spectral filtering"/>
#                         <item value="intensity manipulation"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <group name="filter_characteristics" type="NXdata" optional="true">
#                     <doc>
#                          Properties of the spectral filter such as wavelength dependent Transmission
#                          or reflectivity.
#                     </doc>
#                     <attribute name="characteristics_type" optional="true">
#                         <doc>
#                              Which property is used to form the spectral properties of light,
#                              i.e. transmission or reflection properties.
#                         </doc>
#                         <enumeration>
#                             <item value="transmission"/>
#                             <item value="reflection"/>
#                         </enumeration>
#                     </attribute>
#                 </group>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <!--Later for rework of specific optical elements
# (NXbeam_splitter):
# exists: optional
# doc: |
# Can be used to describe a beam splitter as optical element.-->
#             <group type="NXbeam_transfer_matrix_table" optional="true">
#                 <doc>
#                      Allows description of beam properties via matrices, which relate ingoing with
#                      outgoing beam properties.
#                 </doc>
#             </group>
#             <group name="sample_stage" type="NXmanipulator" optional="true">
#                 <doc>
#                      Sample stage (or manipulator) for positioning of the sample. This should
#                      only contain the spatial orientation of movement.
#                 </doc>
#                 <field name="stage_type" optional="true">
#                     <doc>
#                          Specify the type of the sample stage.
#                     </doc>
#                     <enumeration>
#                         <item value="manual stage"/>
#                         <item value="scanning stage"/>
#                         <item value="liquid stage"/>
#                         <item value="gas cell"/>
#                         <item value="cryostat"/>
#                         <item value="heater"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="stage_type_other" optional="true">
#                     <doc>
#                          If "other" was chosen in stage_type, enter here a free text description
#                          of the stage type.
#                     </doc>
#                 </field>
#                 <group name="transformations" type="NXtransformations" optional="true">
#                     <doc>
#                          This allows a description of the stages relation or orientation and
#                          position with respect to the sample or beam, if an laboratory or
#                          an stage coordinate system is defined.
#                     </doc>
#                 </group>
#                 <field name="beam_sample_relation" optional="true">
#                     <doc>
#                          Description of relation of the beam with the sample. How dit the
#                          sample hit the beam, e.g. 'center of sample, long edge parallel
#                          to the plane of incidence'.
#                          Is redundent, if a full orientation description is done via the
#                          stages "transformations" entry.
#                     </doc>
#                 </field>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <group name="temperature_sensor" type="NXsensor" recommended="true">
#                 <field name="name" recommended="true"/>
#                 <field name="measurement">
#                     <enumeration>
#                         <item value="temperature"/>
#                     </enumeration>
#                 </field>
#                 <field name="type" optional="true"/>
#                 <field name="value" type="NX_FLOAT"/>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <group name="temp_control_TYPE" type="NXactuator" optional="true">
#                 <doc>
#                      Type of control for the sample temperature. Replace TYPE by "cryostat" or
#                      "heater" to specify it.
#                 </doc>
#                 <field name="name" recommended="true"/>
#                 <field name="physical_quantity">
#                     <enumeration>
#                         <item value="temperature"/>
#                     </enumeration>
#                 </field>
#                 <field name="cooler_or_heater" recommended="true">
#                     <enumeration>
#                         <item value="cooler"/>
#                         <item value="heater"/>
#                     </enumeration>
#                 </field>
#                 <field name="type" optional="true">
#                     <doc>
#                          Hardware used for actuation, i.e. laser, gas lamp, filament, resistive
#                     </doc>
#                 </field>
#                 <group type="NXpid" recommended="true">
#                     <field name="setpoint" type="NX_FLOAT" recommended="true"/>
#                 </group>
#                 <group name="device_information" type="NXfabrication" optional="true"/>
#             </group>
#             <group name="device_information" type="NXfabrication" recommended="true">
#                 <doc>
#                      General device information of the optical spectroscopy setup, if
#                      suitable (e.g. for a tabletop spectrometer or other non-custom build setups).
#                      For custom build setups, this may be limited to the construction year.
#                 </doc>
#                 <field name="vendor" recommended="true"/>
#                 <field name="model" recommended="true"/>
#                 <group name="identifier" type="NXidentifier" recommended="true"/>
#                 <field name="construction_year" type="NX_DATE_TIME" optional="true"/>
#             </group>
#             <group name="software_TYPE" type="NXprogram" recommended="true">
#                 <field name="program">
#                     <doc>
#                          Commercial or otherwise defined given name of the program that was
#                          used to control any parts of the optical spectroscopy setup.
#                          The uppercase TYPE should be replaced by a specification name, i.e.
#                          "software_detector" or "software_stage" to specify the respective
#                          program or software components.
#                     </doc>
#                     <attribute name="version" recommended="true">
#                         <doc>
#                              Either version with build number, commit hash, or description of a
#                              (online) repository where the source code of the program and build
#                              instructions can be found so that the program can be configured in
#                              such a way that result files can be created ideally in a
#                              deterministic manner.
#                         </doc>
#                     </attribute>
#                     <attribute name="URL" optional="true">
#                         <doc>
#                              Description of the software by persistent resource, where the program,
#                              code, script etc. can be found.
#                         </doc>
#                     </attribute>
#                 </field>
#             </group>
#             <group name="instrument_calibration_DEVICE" type="NXcalibration" recommended="true">
#                 <doc>
#                      Pre-calibration of an arbitrary device of the instrumental setup, which
#                      has the name DEVICE. You can specify here how, at which time by which method
#                      the calibration was done. As well the accuracy and a link to the calibration
#                      dataset.
#                 </doc>
#                 <field name="device_path" recommended="true">
#                     <doc>
#                          Path to the device, which was calibrated.
#                          Example: entry/instrument/DEVICE
#                     </doc>
#                 </field>
#                 <group name="calibration_accuracy" type="NXdata" optional="true">
#                     <doc>
#                          Provide data about the determined accuracy of the device, this may
#                          may be a single value or a dataset like wavelength error vs. wavelength etc.
#                     </doc>
#                 </group>
#                 <field name="calibration_status" type="NX_CHAR" recommended="true">
#                     <doc>
#                          Was a calibration performed? If yes, when was it done? If the
#                          calibration time is provided, it should be specified in
#                          ENTRY/INSTRUMENT/calibration/calibration_time.
#                     </doc>
#                     <enumeration>
#                         <item value="calibration time provided"/>
#                         <item value="no calibration"/>
#                         <item value="within 1 hour"/>
#                         <item value="within 1 day"/>
#                         <item value="within 1 week"/>
#                     </enumeration>
#                 </field>
#                 <field name="calibration_time" type="NX_DATE_TIME" optional="true">
#                     <doc>
#                          If calibtration status is 'calibration time provided', specify the
#                          ISO8601 date when calibration was last performed before this
#                          measurement. UTC offset should be specified.
#                     </doc>
#                 </field>
#                 <group type="NXdata" optional="true">
#                     <doc>
#                          Generic data which does not fit to the 'NX_FLOAT' fields in NXproces.
#                          This can be for example the instrument response function.
#                     </doc>
#                 </group>
#             </group>
#             <group name="wavelength_resolution" type="NXresolution" optional="true">
#                 <doc>
#                      The overall resolution of the optical instrument.
#                 </doc>
#                 <field name="physical_quantity">
#                     <enumeration>
#                         <item value="wavelength"/>
#                     </enumeration>
#                 </field>
#                 <field name="type" recommended="true"/>
#                 <field name="resolution" type="NX_FLOAT" units="NX_WAVELENGTH">
#                     <doc>
#                          Minimum distinguishable wavelength separation of peaks in spectra.
#                     </doc>
#                 </field>
#             </group>
#             <field name="sample_medium_refractive_indices" type="NX_FLOAT" optional="true" units="NX_UNITLESS">
#                 <doc>
#                      Array of pairs of complex refractive indices n + ik of the medium
#                      for every measured spectral point/wavelength/energy.
#                      Only necessary if the measurement was performed not in air, or
#                      something very well known, e.g. high purity water.
#                 </doc>
#                 <dimensions rank="2">
#                     <dim index="1" value="2"/>
#                     <dim index="2" value="N_spectrum"/>
#                 </dimensions>
#             </field>
#         </group>
#         <group type="NXsample">
#             <doc>
#                  Properties of the sample, such as sample type, layer structure,
#                  chemical formula, atom types, its history etc.
#                  Information about the sample stage and sample environment should be
#                  described in ENTRY/INSTRUMENT/sample_stage.
#             </doc>
#             <field name="name"/>
#             <field name="sample_id" recommended="true">
#                 <doc>
#                      Locally unique ID of the sample, used in the reasearch institute or group.
#                 </doc>
#             </field>
#             <field name="physical_form" recommended="true">
#                 <doc>
#                      State the form of the sample, examples are:
#                      thin film, single crystal, poly crystal, amorphous, single layer,
#                      multi layer, liquid, gas, pellet, powder.
#                      Generic properties of liquids or gases see NXsample properties.
#                 </doc>
#             </field>
#             <field name="description" optional="true">
#                 <doc>
#                      Free text description of the sample.
#                 </doc>
#             </field>
#             <field name="chemical_formula" recommended="true">
#                 <doc>
#                      Chemical formula of the sample. Use the Hill system (explained here:
#                      https://en.wikipedia.org/wiki/Chemical_formula#Hill_system) to write
#                      the chemical formula. In case the sample consists of several layers,
#                      this should be a list of the chemical formulas of the individual
#                      layers, where the first entry is the chemical formula of the top
#                      layer (the one on the front surface, on which the light incident).
#                      The order must be consistent with layer_structure
#                 </doc>
#             </field>
#             <field name="atom_types" optional="true">
#                 <doc>
#                      List of comma-separated elements from the periodic table that are
#                      contained in the sample. If the sample substance has multiple
#                      components, all elements from each component must be included in
#                      'atom_types'.
#                 </doc>
#             </field>
#             <field name="preparation_date" type="NX_DATE_TIME" recommended="true">
#                 <doc>
#                      ISO 8601 time code with local time zone offset to UTC information
#                      when the specimen was prepared.
#                      
#                      Ideally, report the end of the preparation, i.e. the last known timestamp when
#                      the measured specimen surface was actively prepared.
#                 </doc>
#             </field>
#             <group name="history" type="NXhistory" recommended="true">
#                 <doc>
#                      A set of activities that occurred to the sample prior to/during the experiment.
#                 </doc>
#             </group>
#             <group name="temperature" type="NXenvironment" recommended="true">
#                 <doc>
#                      Sample temperature (either controlled or just measured).
#                 </doc>
#                 <field name="temperature_nominal" optional="true">
#                     <doc>
#                          If no sensor was available for the determination of temperature, selected
#                          a nominal value which represents approximately the situation of sample temperature.
#                     </doc>
#                     <enumeration>
#                         <item value="room temperature"/>
#                         <item value="liquid helium temperature"/>
#                         <item value="liquid nitrogen temperature"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#                 <field name="temperature_nominal_other" type="NX_NUMBER" optional="true" units="NX_TEMPERATURE">
#                     <doc>
#                          If temperature_nominal is "other", enter here a nominal/assumed/estimated
#                          sample temperature.
#                     </doc>
#                 </field>
#                 <group name="temperature_sensor" type="NXsensor" recommended="true">
#                     <doc>
#                          Temperature sensor measuring the sample temperature.
#                          This should be a link to /entry/instrument/manipulator/temperature_sensor.
#                     </doc>
#                 </group>
#                 <group name="sample_heater" type="NXactuator" optional="true">
#                     <doc>
#                          Device to heat the sample.
#                          This should be a link to /entry/instrument/manipulator/sample_heater.
#                     </doc>
#                 </group>
#                 <group name="sample_cooler" type="NXactuator" optional="true">
#                     <doc>
#                          Device for cooling the sample (Cryostat, Airflow cooler, etc.).
#                          This should be a link to /entry/instrument/manipulator/cryostat.
#                     </doc>
#                 </group>
#             </group>
#             <group type="NXenvironment" optional="true">
#                 <doc>
#                      Arbirary sample property which may be varied during the experiment
#                      and controlled by a device. Examples are pressure, voltage, magnetic field etc.
#                      Similar to the temperautre description of the sample.
#                 </doc>
#                 <field name="sample_medium" recommended="true">
#                     <doc>
#                          Medium, in which the sample is placed.
#                     </doc>
#                     <enumeration>
#                         <item value="air"/>
#                         <item value="vacuum"/>
#                         <item value="inert atmosphere"/>
#                         <item value="oxidising atmosphere"/>
#                         <item value="reducing atmosphere"/>
#                         <item value="sealed can"/>
#                         <item value="water"/>
#                         <item value="other"/>
#                     </enumeration>
#                 </field>
#             </group>
#             <!--Make something like NXlayer_structure_sample?-->
#             <field name="thickness" type="NX_NUMBER" optional="true" units="NX_LENGTH">
#                 <doc>
#                      (Measured) sample thickness.
#                      
#                      The information is recorded to qualify if the light used was likely
#                      able to shine through the sample.
#                      
#                      In this case the value should be set to the actual thickness of
#                      the specimen viewed for an illumination situation where the nominal
#                      surface normal of the specimen is parallel to the optical axis.
#                 </doc>
#             </field>
#             <field name="thickness_determination" optional="true">
#                 <doc>
#                      If a thickness if given, please specify how this thickness was estimated or
#                      determined.
#                 </doc>
#             </field>
#             <!--Maybe consider here to include NXsample_component_set.-->
#             <field name="layer_structure" optional="true">
#                 <doc>
#                      Qualitative description of the layer structure for the sample,
#                      starting with the top layer (i.e. the one on the front surface, on
#                      which the light incident), e.g. native oxide/bulk substrate, or
#                      Si/native oxide/thermal oxide/polymer/peptide.
#                 </doc>
#             </field>
#             <field name="sample_orientation" optional="true">
#                 <doc>
#                      Specify the sample orientation, how is its sample normal oriented
#                      relative in the laboratory reference frame, incident beam reference
#                      frame.
#                 </doc>
#             </field>
#             <field name="substrate" recommended="true">
#                 <doc>
#                      If the sample is grown or fixed on a substrate, specify this here by
#                      a free text description.
#                 </doc>
#             </field>
#         </group>
#         <group type="NXdata">
#             <doc>
#                  Here generic types of data may be saved.. This may refer to data derived
#                  from single or multiple raw measurements (i.e. several intensities are
#                  evaluated for different parameters: ellipsometry -&gt; psi and delta) -
#                  i.e. non-raw data.
#                  As well plotable data may be stored/linked here, which provides the most suitable
#                  representation of the data (for the respective community).
#                  
#                  You may provide multiple instances of NXdata
#             </doc>
#             <attribute name="axes">
#                 <doc>
#                      Spectrum, i.e. x-axis of the data (e.g. wavelength, energy etc.)
#                 </doc>
#             </attribute>
#             <attribute name="signal">
#                 <doc>
#                      Spectrum, i.e. y-axis of the data (e.g. counts, intensity)
#                 </doc>
#             </attribute>
#         </group>
#         <group name="measurement_data_calibration_TYPE" type="NXprocess" recommended="true">
#             <group name="wavelength_calibration" type="NXcalibration" optional="true">
#                 <field name="calibrated_axis" type="NX_FLOAT" recommended="true">
#                     <doc>
#                          Location to save the calibrated wavelength data.
#                     </doc>
#                 </field>
#             </group>
#         </group>
#         <!--The old "data_collection(NXprocess)" is now replaced by more flexbile
# NXdata. The detailed inclusion of a data collection description (i.e.
# raw data from ellipsometry as polarization values to the usually used
# psi and delta values), will be done later after the NXopt workshop.-->
#         <group name="derived_parameters" type="NXprocess" optional="true">
#             <doc>
#                  Parameters that are derived from the measured data.
#             </doc>
#             <field name="depolarization" type="NX_NUMBER" optional="true" units="NX_UNITLESS">
#                 <doc>
#                      Light loss due to depolarization as a value in [0-1].
#                 </doc>
#                 <dimensions rank="3">
#                     <dim index="1" value="N_measurements"/>
#                     <dim index="2" value="1"/>
#                     <dim index="3" value="N_spectrum"/>
#                 </dimensions>
#             </field>
#             <field name="jones_quality_factor" type="NX_NUMBER" optional="true" units="NX_UNITLESS">
#                 <doc>
#                      Jones quality factor.
#                 </doc>
#                 <dimensions rank="3">
#                     <dim index="1" value="N_measurements"/>
#                     <dim index="2" value="1"/>
#                     <dim index="3" value="N_spectrum"/>
#                 </dimensions>
#             </field>
#             <field name="reflectivity" type="NX_NUMBER" optional="true" units="NX_UNITLESS">
#                 <doc>
#                      Reflectivity.
#                 </doc>
#                 <dimensions rank="3">
#                     <dim index="1" value="N_measurements"/>
#                     <dim index="2" value="1"/>
#                     <dim index="3" value="N_spectrum"/>
#                 </dimensions>
#             </field>
#             <field name="transmittance" type="NX_NUMBER" optional="true" units="NX_UNITLESS">
#                 <doc>
#                      Transmittance.
#                 </doc>
#                 <dimensions rank="3">
#                     <dim index="1" value="N_measurements"/>
#                     <dim index="2" value="1"/>
#                     <dim index="3" value="N_spectrum"/>
#                 </dimensions>
#             </field>
#             <group name="ANALYSIS_program" type="NXprocess" optional="true">
#                 <field name="program">
#                     <doc>
#                          Commercial or otherwise defined given name of the program that was
#                          used to generate or calculate the derived parameters.
#                          If home written, one can provide the actual steps in the NOTE
#                          subfield here.
#                     </doc>
#                 </field>
#                 <field name="version">
#                     <doc>
#                          Either version with build number, commit hash, or description of a
#                          (online) repository where the source code of the program and build
#                          instructions can be found so that the program can be configured in
#                          such a way that result files can be created ideally in a
#                          deterministic manner.
#                     </doc>
#                 </field>
#             </group>
#         </group>
#     </group>
# </definition>
