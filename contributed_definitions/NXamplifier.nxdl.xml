<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<!--
# NeXus - Neutron and X-ray Common Data Format
# 
# Copyright (C) 2023-2025 NeXus International Advisory Committee (NIAC)
# 
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXamplifier" extends="NXcomponent" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <doc>
        Base classed definition for amplifier devices.
    </doc>
    <field name="classification">
        <doc>
            Type of the amplifier base on the response on frequency.
        </doc>
        <enumeration open="true">
            <item value="low-pass">
                <doc>
                    A low-pass filter is a filter that passes signals
                    with a frequency lower than a certain cutoff frequency and 
                    attenuates signals with frequencies higher than the cutoff frequency.
                </doc>
            </item>
            <item value="high-pass">
                <doc>
                    A high-pass filter is a filter that passes signals
                    with a frequency higher than a certain cutoff frequency and
                    attenuates signals with frequencies lower than the cutoff frequency.
                </doc>
            </item>
            <item value="band-pass">
                <doc>
                    A band-pass filter is a filter that passes signals
                    within a certain frequency range and attenuates signals outside that range.
                </doc>
            </item>
            <item value="band-stop">
                <doc>
                    A band-stop filter is a filter (opposite to the band-pass) that attenuates signals
                    within a certain frequency range and passes signals outside that range.
                </doc>
            </item>
            <item value="broadband">
                <doc>
                    A broadband filter is a filter that passes signals
                    over a wide range of frequencies with minimal attenuation.
                </doc>
            </item>
        </enumeration>
    </field>
    <group name="hardware" type="NXfabrication">
        <doc>
            (IC, device) (NXmanufacturer?)
        </doc>
    </group>
    <field name="num_of_channels" type="NX_NUMBER">
        <doc>
            The number of preamplifier channels are assigned.
        </doc>
    </field>
    <field name="active_channels" type="NX_NUMBER">
        <doc>
            The number of preamplifier channels are ready to be used. (array for active
            channels)
        </doc>
    </field>
    <field name="openloop_amplification" type="NX_NUMBER">
        <doc>
            The output signal does not go through a feedback loop to adjust the
            amplification of the amplifier. (array for active channels)
        </doc>
    </field>
    <!--amplification(NX_NUMBER):
doc: !!! The ratio of the amplitude of the output signal to the amplitude of the input signal. (array for active channels) # From google.-->
    <field name="signal_over_noise" type="NX_NUMBER">
        <doc>
            The ratio of the amplitude of the target signal to the amplitude of the noise in
            the output signal of the amplifier. S/N=V_signal/V_noise. (array for active
            channels)
        </doc>
    </field>
    <field name="crosstalk_factor" type="NX_NUMBER" units="db">
        <doc>
            The unwanted coupling between different channels (if active &gt;1).
            In ideal amplifier, channels are independent of each other, But due to different resources
            sharing (e.g., same power supply, electromagnetic interference), there may have some 
            unwanted coupling between different channels, which is called crosstalk.
        </doc>
    </field>
    <field name="crosstalk_compensation" type="NX_BOOLEAN">
        <doc>
            If measures are taken for reducing interferences between different signalling
            pathways.
        </doc>
    </field>
    <field name="bandwidth" type="NX_NUMBER" units="NX_FREQUENCY">
        <doc>
            The spectrum of frequency it can amplify, from its lowest to highest frequency
            limits. If it is difference of the frequencies, please also provide :ref: 
            `center_frequency &lt;/NXamplifier/center_frequency-field&gt;`.
        </doc>
    </field>
    <field name="center_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
        <doc>
            The frequency in the middle of the bandwidth.
        </doc>
    </field>
    <field name="lower_cutoff_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
        <doc>
            The lower frequency point of the bandwidth where gain drops significantly (e.g.,
            -3dB point).
        </doc>
    </field>
    <field name="upper_cutoff_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
        <doc>
            The upper frequency point of the bandwidth where gain drops significantly (e.g.,
            -3dB point).
        </doc>
    </field>
    <field name="gain" type="NX_NUMBER">
        <doc>
            The ratio of the output signal to the input signal of the amplifier.
        </doc>
    </field>
</definition>
