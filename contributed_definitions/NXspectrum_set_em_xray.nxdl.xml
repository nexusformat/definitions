<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition category="base" extends="NXobject" name="NXspectrum_set_em_xray" type="group" xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">
    <symbols>
        <symbol name="n_p">
            <doc>
                 Number of scan points
            </doc>
        </symbol>
        <symbol name="n_photon_energy">
            <doc>
                 Number of X-ray photon energy (bins)
            </doc>
        </symbol>
        <symbol name="n_y">
            <doc>
                 Number of pixel per Kikuchi pattern in the slow direction
            </doc>
        </symbol>
        <symbol name="n_x">
            <doc>
                 Number of pixel per Kikuchi pattern in the fast direction
            </doc>
        </symbol>
        <symbol name="n_elements">
            <doc>
                 Number of identified elements
            </doc>
        </symbol>
    </symbols>
    <doc>
         Container for reporting a set of energy-dispersive X-ray spectra.
         
         Virtually the most important case is that spectra are collected in 
         a scanning microscope (SEM or STEM) for a collection of points.
         The majority of cases use simple d-dimensional regular scan pattern,
         such as line profiles or surface mappings.
         Surface mappings are the most frequently used ones.
         
         Often such sets of scan points will be measured with the same settings,
         i.e. the same binning, energy resolution.
    </doc>
    <group type="NXdata">
        <doc>
             Collected X-ray counts.
        </doc>
        <field name="counts" type="NX_UINT" units="NX_UNITLESS">
            <dimensions rank="3">
                <dim index="1" value="n_y"/>
                <dim index="2" value="n_x"/>
                <dim index="3" value="n_photon_energy"/>
            </dimensions>
            <attribute name="long_name" type="NX_CHAR">
                <doc>
                     X-ray photon counts
                </doc>
            </attribute>
        </field>
        <field name="ypos" type="NX_NUMBER" units="NX_LENGTH">
            <dimensions rank="1">
                <dim index="1" value="n_y"/>
            </dimensions>
            <attribute name="long_name" type="NX_CHAR">
                <doc>
                     Label for the y axis
                </doc>
            </attribute>
        </field>
        <field name="xpos" type="NX_NUMBER" units="NX_LENGTH">
            <dimensions rank="1">
                <dim index="1" value="n_x"/>
            </dimensions>
            <attribute name="long_name" type="NX_CHAR">
                <doc>
                     Label for the x axis
                </doc>
            </attribute>
        </field>
        <field name="photon_energy" type="NX_NUMBER" units="NX_ENERGY">
            <dimensions rank="1">
                <dim index="1" value="n_photon_energy"/>
            </dimensions>
            <attribute name="long_name" type="NX_CHAR">
                <doc>
                     X-ray energy
                </doc>
            </attribute>
        </field>
    </group>
    <group name="indexing" type="NXprocess">
        <doc>
             Details about computational steps how peaks were indexed as elements.
        </doc>
        <field name="program" type="NX_CHAR">
            <doc>
                 Given name of the program that was used to perform this computation.
            </doc>
            <attribute name="version" type="NX_CHAR">
                <doc>
                     Program version plus build number, commit hash, or description of an ever persistent resource
                     where the source code of the program and build instructions can be found so that the program
                     can be configured in such a manner that the result file is ideally recreatable yielding the
                     same results.
                </doc>
            </attribute>
        </field>
        <group type="NXpeak">
            <doc>
                 Name and location of each X-ray line which was indexed as a known ion.
            </doc>
        </group>
        <field name="element_names" type="NX_CHAR">
            <doc>
                 List of the names of identified elements.
            </doc>
            <dimensions rank="1">
                <dim index="1" value="n_elements"/>
            </dimensions>
        </field>
    </group>
    <group name="edx_maps" type="NXprocess">
        <doc>
             Individual element-specific EDX/EDS/EDXS/SXES mapping
        </doc>
        <field name="program" type="NX_CHAR">
            <doc>
                 Given name of the program that was used to perform this computation.
            </doc>
            <attribute name="version" type="NX_CHAR">
                <doc>
                     Program version plus build number, commit hash, or description of an ever persistent resource
                     where the source code of the program and build instructions can be found so that the program
                     can be configured in such a manner that the result file is ideally recreatable yielding the
                     same results.
                </doc>
            </attribute>
        </field>
        <group type="NXdata">
            <doc>
                 Individual element-specific maps. Individual maps should
                 each be a group and be named according to element_names
            </doc>
        </group>
    </group>
</definition>
