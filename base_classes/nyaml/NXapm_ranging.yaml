category: base
doc: |
  Base class for the configuration and results of ranging definitions.
  
  Ranging is a data post-processing step used in the research field of
  atom probe during which elemental, isotopic, and/or molecular identities
  are assigned to mass-to-charge-state ratios within certain intervals.
  The documentation of these steps is based on ideas that
  have been described in the literature:
  
  * `M. K. Miller <https://doi.org/10.1002/sia.1719>`_
  * `D. Haley et al. <https://doi.org/10.1017/S1431927620024290>`_
  * `M. K端hbach et al. <https://doi.org/10.1017/S1431927621012241>`_
type: group
NXapm_ranging(NXprocess):
  (NXprogram):
  (NXnote):
  mass_to_charge_distribution(NXprocess):
    doc: |
      Specifies the mass-to-charge-state ratio histogram.
    (NXprogram):
    min_mass_to_charge(NX_FLOAT):
      unit: NX_ANY
      doc: |
        Smallest :math:`{\frac{m}{q}}_{min}` mass-to-charge-state ratio value.
        
        The lower (left-hand side) inclusive bound of the interval :math:`[{\frac{m}{q}}_{min}, {\frac{m}{q}}_{max}]`.
    max_mass_to_charge(NX_FLOAT):
      unit: NX_ANY
      doc: |
        Largest :math:`{\frac{m}{q}}_{max}` mass-to-charge-state ratio value.
        
        The upper (right-hand side) inclusive bound of the interval :math:`[{\frac{m}{q}}_{min}, {\frac{m}{q}}_{max}]`.
    n_mass_to_charge(NX_POSINT):
      unit: NX_UNITLESS
      doc: |
        The number of bins on the interval :math:`[{\frac{m}{q}}_{min},
        {\frac{m}{q}}_{max}]`.
    mass_spectrum(NXdata):
      doc: |
        A default histogram aka mass spectrum of
        the mass-to-charge-state ratio values.
  background_quantification(NXprocess):
    doc: |
      Details of the background model that was used to
      correct the total counts per bin into counts.
    (NXprogram):
    description(NX_CHAR):
      doc: |
        Free-text field to describe how atom probers define a background model.
        
        Thereby, community feedback can be collected to inform an improved
        version of this base class in the future.
  peak_search_and_deconvolution(NXprocess):
    doc: |
      How were peaks in the mass-to-charge-state ratio histogram identified.
    (NXprogram):
    (NXpeak):
  peak_identification(NXprocess):
    doc: |
      Details about how peaks, with taking into account
      error models, were interpreted as ion types or not.
    (NXprogram):
    number_of_ion_types(NX_UINT):
      unit: NX_UNITLESS
      doc: |
        How many ion types are distinguished. If no ranging was performed, each
        ion is of the special unknown type. The iontype ID of this unknown type
        is 0 representing a reserved value.
        
        Consequently, start counting iontypes from 1.
    maximum_number_of_atoms_per_molecular_ion(NX_UINT):
      unit: NX_UNITLESS
      doc: |
        Assumed maximum value that suffices to store all relevant molecular ions,
        even the most complicated ones that one can typically observe and distinguish
        typically. Currently, a value of 32 is used (see M. K端hbach et al. <https://doi.org/10.1017/S1431927621012241>`_).
    (NXatom):

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# 796fd73d95b774d103b038055274f2fea14db914d5431da7ef58086defbb26f4
# <?xml version="1.0" encoding="UTF-8"?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2024-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXapm_ranging" extends="NXprocess" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <doc>
#         Base class for the configuration and results of ranging definitions.
#         
#         Ranging is a data post-processing step used in the research field of
#         atom probe during which elemental, isotopic, and/or molecular identities
#         are assigned to mass-to-charge-state ratios within certain intervals.
#         The documentation of these steps is based on ideas that
#         have been described in the literature:
#         
#         * `M. K. Miller &lt;https://doi.org/10.1002/sia.1719&gt;`_
#         * `D. Haley et al. &lt;https://doi.org/10.1017/S1431927620024290&gt;`_
#         * `M. K端hbach et al. &lt;https://doi.org/10.1017/S1431927621012241&gt;`_
#     </doc>
#     <group type="NXprogram"/>
#     <group type="NXnote"/>
#     <group name="mass_to_charge_distribution" type="NXprocess">
#         <doc>
#             Specifies the mass-to-charge-state ratio histogram.
#         </doc>
#         <group type="NXprogram"/>
#         <field name="min_mass_to_charge" type="NX_FLOAT" units="NX_ANY">
#             <doc>
#                 Smallest :math:`{\frac{m}{q}}_{min}` mass-to-charge-state ratio value.
#                 
#                 The lower (left-hand side) inclusive bound of the interval :math:`[{\frac{m}{q}}_{min}, {\frac{m}{q}}_{max}]`.
#             </doc>
#         </field>
#         <field name="max_mass_to_charge" type="NX_FLOAT" units="NX_ANY">
#             <doc>
#                 Largest :math:`{\frac{m}{q}}_{max}` mass-to-charge-state ratio value.
#                 
#                 The upper (right-hand side) inclusive bound of the interval :math:`[{\frac{m}{q}}_{min}, {\frac{m}{q}}_{max}]`.
#             </doc>
#         </field>
#         <field name="n_mass_to_charge" type="NX_POSINT" units="NX_UNITLESS">
#             <doc>
#                 The number of bins on the interval :math:`[{\frac{m}{q}}_{min},
#                 {\frac{m}{q}}_{max}]`.
#             </doc>
#         </field>
#         <group name="mass_spectrum" type="NXdata">
#             <doc>
#                 A default histogram aka mass spectrum of
#                 the mass-to-charge-state ratio values.
#             </doc>
#         </group>
#     </group>
#     <group name="background_quantification" type="NXprocess">
#         <doc>
#             Details of the background model that was used to
#             correct the total counts per bin into counts.
#         </doc>
#         <group type="NXprogram"/>
#         <field name="description" type="NX_CHAR">
#             <doc>
#                 Free-text field to describe how atom probers define a background model.
#                 
#                 Thereby, community feedback can be collected to inform an improved
#                 version of this base class in the future.
#             </doc>
#         </field>
#     </group>
#     <group name="peak_search_and_deconvolution" type="NXprocess">
#         <doc>
#             How were peaks in the mass-to-charge-state ratio histogram identified.
#         </doc>
#         <group type="NXprogram"/>
#         <group type="NXpeak"/>
#     </group>
#     <group name="peak_identification" type="NXprocess">
#         <doc>
#             Details about how peaks, with taking into account
#             error models, were interpreted as ion types or not.
#         </doc>
#         <group type="NXprogram"/>
#         <field name="number_of_ion_types" type="NX_UINT" units="NX_UNITLESS">
#             <doc>
#                 How many ion types are distinguished. If no ranging was performed, each
#                 ion is of the special unknown type. The iontype ID of this unknown type
#                 is 0 representing a reserved value.
#                 
#                 Consequently, start counting iontypes from 1.
#             </doc>
#         </field>
#         <field name="maximum_number_of_atoms_per_molecular_ion" type="NX_UINT" units="NX_UNITLESS">
#             <doc>
#                 Assumed maximum value that suffices to store all relevant molecular ions,
#                 even the most complicated ones that one can typically observe and distinguish
#                 typically. Currently, a value of 32 is used (see M. K端hbach et al. &lt;https://doi.org/10.1017/S1431927621012241&gt;`_).
#             </doc>
#         </field>
#         <group type="NXatom"/>
#     </group>
# </definition>
